{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/baxa/Documents/atatek/atatek-v2/frontend/node_modules/family-chart/dist/family-chart.esm.js"],"sourcesContent":["// https://donatso.github.io/family-chart/ v0.5.2 Copyright 2025 donatso\nimport * as _d3 from 'd3';\n\nvar d3 = typeof window === \"object\" && !!window.d3 ? window.d3 : _d3;\n\nfunction sortChildrenWithSpouses(children, datum, data) {\n  if (!datum.rels.children) return\n  const spouses = datum.rels.spouses || [];\n  return children.sort((a, b) => {\n    const a_p2 = otherParent(a, datum, data) || {};\n    const b_p2 = otherParent(b, datum, data) || {};\n    const a_i = spouses.indexOf(a_p2.id);\n    const b_i = spouses.indexOf(b_p2.id);\n\n    if (datum.data.gender === \"M\") return a_i - b_i\n    else return b_i - a_i\n  })\n}\n\nfunction sortAddNewChildren(children) {\n  return children.sort((a, b) => {\n    const a_new = a._new_rel_data;\n    const b_new = b._new_rel_data;\n    if (a_new && !b_new) return 1\n    if (!a_new && b_new) return -1\n    return 0\n  })\n}\n\nfunction otherParent(d, p1, data) {\n  return data.find(d0 => (d0.id !== p1.id) && ((d0.id === d.rels.mother) || (d0.id === d.rels.father)))\n}\n\nfunction calculateEnterAndExitPositions(d, entering, exiting) {\n  d.exiting = exiting;\n  if (entering) {\n    if (d.depth === 0 && !d.spouse) {d._x = d.x; d._y = d.y;}\n    else if (d.spouse) {d._x = d.spouse.x; d._y = d.spouse.y;}\n    else if (d.is_ancestry) {d._x = d.parent.x; d._y = d.parent.y;}\n    else {d._x = d.psx; d._y = d.psy;}\n  } else if (exiting) {\n    const x = d.x > 0 ? 1 : -1,\n      y = d.y > 0 ? 1 : -1;\n    {d._x = d.x+400*x; d._y = d.y+400*y;}\n  }\n}\n\nfunction toggleRels(tree_datum, hide_rels) {\n  const\n    rels = hide_rels ? 'rels' : '_rels',\n    rels_ = hide_rels ? '_rels' : 'rels';\n  \n  if (tree_datum.is_ancestry || tree_datum.data.main) {showHideAncestry('father'); showHideAncestry('mother');}\n  else {showHideChildren();}\n\n  function showHideAncestry(rel_type) {\n    if (!tree_datum.data[rels] || !tree_datum.data[rels][rel_type]) return\n    if (!tree_datum.data[rels_]) tree_datum.data[rels_] = {};\n    tree_datum.data[rels_][rel_type] = tree_datum.data[rels][rel_type];\n    delete tree_datum.data[rels][rel_type];\n  }\n\n  function showHideChildren() {\n    if (!tree_datum.data[rels] || !tree_datum.data[rels].children) return\n    const\n      children = tree_datum.data[rels].children.slice(0),\n      spouses = tree_datum.spouse ? [tree_datum.spouse] : tree_datum.spouses || [];\n\n    [tree_datum, ...spouses].forEach(sp => children.forEach(ch_id => {\n      if (sp.data[rels].children.includes(ch_id)) {\n        if (!sp.data[rels_]) sp.data[rels_] = {};\n        if (!sp.data[rels_].children) sp.data[rels_].children = [];\n        sp.data[rels_].children.push(ch_id);\n        sp.data[rels].children.splice(sp.data[rels].children.indexOf(ch_id), 1);\n      }\n    }));\n  }\n}\n\nfunction toggleAllRels(tree_data, hide_rels) {\n  tree_data.forEach(d => {d.data.hide_rels = hide_rels; toggleRels(d, hide_rels);});\n}\n\nfunction setupSiblings({tree, data_stash, node_separation, sortChildrenFunction}) {\n  const main = tree.find(d => d.data.main);\n  const main_father_id = main.data.rels.father;\n  const main_mother_id = main.data.rels.mother;\n\n  const siblings = findSiblings();\n  const siblings_added = addSiblingsToTree();\n  positionSiblings();\n\n\n  function findSiblings() {\n    return data_stash.filter(d => {\n      if (d.id === main.data.id) return false\n      if (main_father_id && d.rels.father === main_father_id) return true\n      if (main_mother_id && d.rels.mother === main_mother_id) return true\n      return false\n    }) \n  }\n\n\n  function addSiblingsToTree() {\n    const siblings_added = [];\n\n    for (let i = 0; i < siblings.length; i++) {\n      const sib = {data: siblings[i], sibling: true};\n\n      sib.parents = [];\n      const father = main.parents.find(d => d.data.id === sib.data.rels.father);\n      const mother = main.parents.find(d => d.data.id === sib.data.rels.mother);\n      if (father) sib.parents.push(father);\n      if (mother) sib.parents.push(mother);\n      \n      sib.x = undefined; // to be calculated in positionSiblings\n      sib.y = main.y;\n      sib.depth = main.depth-1;\n\n      tree.push(sib);\n      siblings_added.push(sib);\n    }\n\n    return siblings_added\n  }\n\n  function positionSiblings() {\n    const sorted_siblings = [main, ...siblings_added];\n    if (sortChildrenFunction) sorted_siblings.sort((a, b) => sortChildrenFunction(a.data, b.data));  // first sort by custom function if provided\n\n    sorted_siblings.sort((a, b) => {\n      const a_father = main.parents.find(d => d.data.id === a.data.rels.father);\n      const a_mother = main.parents.find(d => d.data.id === a.data.rels.mother);\n      const b_father = main.parents.find(d => d.data.id === b.data.rels.father);\n      const b_mother = main.parents.find(d => d.data.id === b.data.rels.mother);\n\n      // If a doesn't have mother, it should be to the left\n      if (!a_mother && b_mother) return -1\n      // If b doesn't have mother, it should be to the left\n      if (a_mother && !b_mother) return 1\n      // If a doesn't have father, it should be to the right\n      if (!a_father && b_father) return 1\n      // If b doesn't have father, it should be to the right\n      if (a_father && !b_father) return -1\n      // If both have same parents or both missing same parent, maintain original order\n      return 0\n    });\n\n    const main_x = main.x;\n    const spouses_x = (main.spouses || []).map(d => d.x);\n    const x_range = d3.extent([main_x, ...spouses_x]);\n\n    const main_sorted_index = sorted_siblings.findIndex(d => d.data.id === main.data.id);\n    for (let i = 0; i < sorted_siblings.length; i++) {\n      if (i === main_sorted_index) continue\n      const sib = sorted_siblings[i];\n      if (i < main_sorted_index) {\n        sib.x = x_range[0] - node_separation*(main_sorted_index - i);\n      } else {\n        sib.x = x_range[1] + node_separation*(i - main_sorted_index);\n      }\n    }\n  }\n}\n\nfunction handlePrivateCards({root, data_stash, is_ancestry, private_cards_config}) {\n  if (is_ancestry) return\n  let d = root;\n  const condition = private_cards_config.condition;\n  if (!condition) return console.error('private_cards_config.condition is not set')\n  check(d);\n\n  function check(d) {\n    if (d.data._new_rel_data) return\n    const is_private = condition(d.data);\n    if (is_private) {\n      delete d.children;\n      d.is_private = true;\n    } else {\n      if (!d.children) return\n      const children_by_spouse = getChildrenBySpouse(d);\n      Object.keys(children_by_spouse).forEach(spouse_id => {\n        const spouse = data_stash.find(d0 => d0.id === spouse_id);\n        const is_private_spouse = condition(spouse);\n        if (is_private_spouse) {\n          d.children = d.children.filter(ch => !children_by_spouse[spouse_id].includes(ch));\n        } else {\n          children_by_spouse[spouse_id].forEach(child => check(child));\n        }\n      });\n      if (d.children.length === 0) delete d.children;\n    }\n    if (d.children) d.children.forEach(d0 => check(d0));\n  }\n\n  function getChildrenBySpouse(d) {\n    const children_by_spouse = {};\n    const p1 = d;\n    (d.children || []).forEach(child => {\n      const ch_rels = child.data.rels;\n      const p2_id = ch_rels.father === p1.data.id ? ch_rels.mother : ch_rels.father;\n      if (!children_by_spouse[p2_id]) children_by_spouse[p2_id] = [];\n      children_by_spouse[p2_id].push(child);\n    });\n    return children_by_spouse\n  }\n}\n\nfunction checkIfRelativesConnectedWithoutPerson(datum, data_stash) {\n  const r = datum.rels,\n    r_ids = [r.father, r.mother, ...(r.spouses || []), ...(r.children || [])].filter(r_id => !!r_id),\n    rels_not_to_main = [];\n\n  for (let i = 0; i < r_ids.length; i++) {\n    const line = findPersonLineToMain(data_stash.find(d => d.id === r_ids[i]), [datum]);\n    if (!line) {rels_not_to_main.push(r_ids[i]); break;}\n  }\n  return rels_not_to_main.length === 0;\n\n  function findPersonLineToMain(datum, without_persons) {\n    let line;\n    if (isM(datum)) line = [datum];\n    checkIfAnyRelIsMain(datum, [datum]);\n    return line\n\n    function checkIfAnyRelIsMain(d0, history) {\n      if (line) return\n      history = [...history, d0];\n      runAllRels(check);\n      if (!line) runAllRels(checkRels);\n\n      function runAllRels(f) {\n        if (!d0) return // todo: check why this happens. test: click spouse and add spouse\n        const r = d0.rels;\n        [r.father, r.mother, ...(r.spouses || []), ...(r.children || [])]\n          .filter(d_id => (d_id && ![...without_persons, ...history].find(d => d.id === d_id)))\n          .forEach(d_id => f(d_id));\n      }\n\n      function check(d_id) {\n        if (isM(d_id)) line = history;\n      }\n\n      function checkRels(d_id) {\n        const person = data_stash.find(d => d.id === d_id);\n        checkIfAnyRelIsMain(person, history);\n      }\n    }\n  }\n  function isM(d0) {return typeof d0 === 'object' ? d0.id === data_stash[0].id : d0 === data_stash[0].id}  // todo: make main more exact\n}\n\nfunction handleLinkRel(updated_datum, link_rel_id, store_data) {\n  const new_rel_id = updated_datum.id;\n\n  store_data.forEach(d => {\n    if (d.rels.father === new_rel_id) d.rels.father = link_rel_id;\n    if (d.rels.mother === new_rel_id) d.rels.mother = link_rel_id;\n    if ((d.rels.spouses || []).includes(new_rel_id)) {\n      d.rels.spouses = d.rels.spouses.filter(id => id !== new_rel_id);\n      if (!d.rels.spouses.includes(link_rel_id)) d.rels.spouses.push(link_rel_id);\n    }\n    if ((d.rels.children || []).includes(new_rel_id)) {\n      d.rels.children = d.rels.children.filter(id => id !== new_rel_id);\n      if (!d.rels.children.includes(link_rel_id)) d.rels.children.push(link_rel_id);\n    }\n  });\n\n  const link_rel = store_data.find(d => d.id === link_rel_id);\n  const new_rel = store_data.find(d => d.id === new_rel_id);\n  (new_rel.rels.children || []).forEach(child_id => {\n    if (!link_rel.rels.children) link_rel.rels.children = [];\n    if (!link_rel.rels.children.includes(child_id)) link_rel.rels.children.push(child_id);\n  });\n  (new_rel.rels.spouses || []).forEach(spouse_id => {\n    if (!link_rel.rels.spouses) link_rel.rels.spouses = [];\n    if (!link_rel.rels.spouses.includes(spouse_id)) link_rel.rels.spouses.push(spouse_id);\n  });\n\n  if (link_rel.rels.father && new_rel.rels.father) console.error('link rel already has father');\n  if (link_rel.rels.mother && new_rel.rels.mother) console.error('link rel already has mother');\n\n  if (new_rel.rels.father) link_rel.rels.father = new_rel.rels.father;\n  if (new_rel.rels.mother) link_rel.rels.mother = new_rel.rels.mother;\n\n  store_data.splice(store_data.findIndex(d => d.id === new_rel_id), 1);\n}\n\nfunction getLinkRelOptions(datum, data) {\n  const rel_datum = datum._new_rel_data ? data.find(d => d.id === datum._new_rel_data.rel_id) : null;\n  const ancestry_ids = getAncestry(datum, data);\n  const progeny_ids = getProgeny(datum, data);\n  if (datum._new_rel_data && ['son', 'daughter'].includes(datum._new_rel_data.rel_type)) progeny_ids.push(...getProgeny(rel_datum, data));\n\n  return data.filter(d => d.id !== datum.id && d.id !== rel_datum?.id && !d._new_rel_data && !d.to_add)\n    .filter(d => !ancestry_ids.includes(d.id))\n    .filter(d => !progeny_ids.includes(d.id))\n\n\n  function getAncestry(datum, data_stash) {\n    const ancestry_ids = [];\n    loopCheck(datum);\n    return ancestry_ids\n\n    function loopCheck(d) {\n      const parents = [d.rels.father, d.rels.mother];\n      if (d.__rels) parents.push(...[d.__rels.father, d.__rels.mother]);\n      parents.forEach(p_id => {\n        if (p_id) {\n          ancestry_ids.push(p_id);\n          loopCheck(data_stash.find(d => d.id === p_id));\n        }\n      });\n    }\n  }\n\n  function getProgeny(datum, data_stash) {\n    const progeny_ids = [];\n    loopCheck(datum);\n    return progeny_ids\n\n    function loopCheck(d) {\n      const children = d.rels.children ? [...d.rels.children] : [];\n      if (d.__rels && d.__rels.children) children.push(...d.__rels.children);\n      children.forEach(c_id => {\n        progeny_ids.push(c_id);\n        loopCheck(data_stash.find(d => d.id === c_id));\n      });\n    }\n  }\n}\n\nfunction createForm({datum, store, fields, postSubmit, addRelative, deletePerson, onCancel, editFirst, link_existing_rel_config}) {\n  const form_creator = {\n    fields: [],\n    onSubmit: submitFormChanges,\n  };\n  if (!datum._new_rel_data) {\n    form_creator.onDelete = deletePersonWithPostSubmit;\n    form_creator.addRelative = () => addRelative.activate(datum),\n    form_creator.addRelativeCancel = () => addRelative.onCancel();\n    form_creator.addRelativeActive = addRelative.is_active;\n\n    form_creator.editable = false;\n  }\n  if (datum._new_rel_data) {\n    form_creator.title = datum._new_rel_data.label;\n    form_creator.new_rel = true;\n    form_creator.editable = true;\n    form_creator.onCancel = onCancel;\n  }\n  if (datum._new_rel_data || datum.to_add) {\n    if (link_existing_rel_config) form_creator.linkExistingRelative = createLinkExistingRelative(datum, store.getData(), link_existing_rel_config);\n  }\n  if (form_creator.onDelete) form_creator.can_delete = checkIfRelativesConnectedWithoutPerson(datum, store.getData());\n\n  if (editFirst) form_creator.editable = true;\n\n  const childred_added = (datum.rels.children || []).some(c_id => {const child = store.getDatum(c_id); return !child._new_rel_data});\n\n  form_creator.gender_field = {\n    id: 'gender', \n    type: 'switch',\n    label: 'Gender',\n    initial_value: datum.data.gender,\n    disabled: ['father', 'mother'].some(rel => rel === datum._new_rel_data?.rel_type) || childred_added,\n    options: [{value: 'M', label: 'Male'}, {value: 'F', label: 'Female'}]\n  };\n\n  fields.forEach(field => {\n    if (field.type === 'rel_reference') addRelReferenceField(field);\n    else if (field.type === 'select') addSelectField(field);\n\n    else form_creator.fields.push({\n      id: field.id,\n      type: field.type,\n      label: field.label,\n      initial_value: datum.data[field.id],\n    });\n  });\n\n  return form_creator\n\n  function addRelReferenceField(field) {\n    if (!field.getRelLabel) console.error('getRelLabel is not set');\n\n    if (field.rel_type === 'spouse') {\n      (datum.rels.spouses || []).forEach(spouse_id => {\n        const spouse = store.getDatum(spouse_id);\n        const marriage_date_id = `${field.id}__ref__${spouse_id}`;\n        \n        form_creator.fields.push({\n          id: marriage_date_id,\n          type: 'rel_reference',\n          label: field.label,\n          rel_id: spouse_id,\n          rel_label: field.getRelLabel(spouse),\n          initial_value: datum.data[marriage_date_id],\n        });\n        \n      });\n    }\n  }\n\n  function addSelectField(field) {\n    if (!field.optionCreator && !field.options) return console.error('optionCreator or options is not set for field', field)\n    form_creator.fields.push({\n      id: field.id,\n      type: field.type,\n      label: field.label,\n      initial_value: datum.data[field.id],\n      placeholder: field.placeholder,\n      options: field.options || field.optionCreator(datum),\n    });\n  }\n\n  function createLinkExistingRelative(datum, data, link_existing_rel_config) {\n    const obj = {\n      label: link_existing_rel_config.label,\n      options: getLinkRelOptions(datum, data)\n        .map(d => ({value: d.id, label: link_existing_rel_config.linkRelLabel(d)}))\n        .sort((a, b) => {\n          if (typeof a.label === 'string' && typeof b.label === 'string') return a.label.localeCompare(b.label)\n          else return a.label < b.label ? -1 : 1\n        }),\n      onSelect: submitLinkExistingRelative\n    };\n    return obj\n\n\n  }\n\n  function submitFormChanges(e) {\n    e.preventDefault();\n    const form_data = new FormData(e.target);\n    form_data.forEach((v, k) => datum.data[k] = v);\n    syncRelReference(datum, store.getData());\n    if (datum.to_add) delete datum.to_add;\n    postSubmit();\n  }\n\n  function submitLinkExistingRelative(e) {\n    const link_rel_id = e.target.value;\n    postSubmit({link_rel_id: link_rel_id});\n  }\n\n  function deletePersonWithPostSubmit() {\n    deletePerson();\n    postSubmit({delete: true});\n  }\n}\n\nfunction syncRelReference(datum, data_stash) {\n  Object.keys(datum.data).forEach(k => {\n    if (k.includes('__ref__')) {\n      const rel_id = k.split('__ref__')[1];\n      const rel = data_stash.find(d => d.id === rel_id);\n      if (!rel) return\n      const ref_field_id = k.split('__ref__')[0]+'__ref__'+datum.id;\n      rel.data[ref_field_id] = datum.data[k];\n    }\n  });\n}\n\nfunction onDeleteSyncRelReference(datum, data_stash) {\n  Object.keys(datum.data).forEach(k => {\n    if (k.includes('__ref__')) {\n      const rel_id = k.split('__ref__')[1];\n      const rel = data_stash.find(d => d.id === rel_id);\n      if (!rel) return\n      const ref_field_id = k.split('__ref__')[0]+'__ref__'+datum.id;\n      delete rel.data[ref_field_id];\n    }\n  });\n}\n\nfunction moveToAddToAdded(datum, data_stash) {\n  delete datum.to_add;\n  return datum\n}\n\nfunction removeToAdd(datum, data_stash) {\n  deletePerson(datum, data_stash);\n  return false\n}\n\nfunction deletePerson(datum, data_stash) {\n  if (!checkIfRelativesConnectedWithoutPerson(datum, data_stash)) return {success: false, error: 'checkIfRelativesConnectedWithoutPerson'}\n  executeDelete();\n  return {success: true};\n\n  function executeDelete() {\n    data_stash.forEach(d => {\n      for (let k in d.rels) {\n        if (!d.rels.hasOwnProperty(k)) continue\n        if (d.rels[k] === datum.id) {\n          delete d.rels[k];\n        } else if (Array.isArray(d.rels[k]) && d.rels[k].includes(datum.id)) {\n          d.rels[k].splice(d.rels[k].findIndex(did => did === datum.id), 1);\n        }\n      }\n    });\n    onDeleteSyncRelReference(datum, data_stash);\n    data_stash.splice(data_stash.findIndex(d => d.id === datum.id), 1);\n    data_stash.forEach(d => {if (d.to_add) deletePerson(d, data_stash);});  // full update of tree\n    if (data_stash.length === 0) data_stash.push(createTreeDataWithMainNode({}).data[0]);\n  }\n}\n\nfunction cleanupDataJson(data) {\n  data.forEach(d => d.to_add ? removeToAdd(d, data) : d);\n  data.forEach(d => {\n    delete d.main;\n    delete d._tgdp;\n    delete d._tgdp_sp;\n    delete d.__tgdp_sp;\n  });\n  data.forEach(d => {\n    Object.keys(d).forEach(k => {\n      if (k[0] === '_') console.error('key starts with _', k);\n    });\n  });\n  return data\n}\n\nfunction removeToAddFromData(data) {\n  data.forEach(d => d.to_add ? removeToAdd(d, data) : d);\n  return data\n}\n\nfunction handleRelsOfNewDatum({datum, data_stash, rel_type, rel_datum}) {\n  if (rel_type === \"daughter\" || rel_type === \"son\") addChild(datum);\n  else if (rel_type === \"father\" || rel_type === \"mother\") addParent(datum);\n  else if (rel_type === \"spouse\") addSpouse(datum);\n\n  function addChild(datum) {\n    if (datum.data.other_parent) {\n      addChildToSpouseAndParentToChild(datum.data.other_parent);\n      delete datum.data.other_parent;\n    }\n    datum.rels[rel_datum.data.gender === 'M' ? 'father' : 'mother'] = rel_datum.id;\n    if (!rel_datum.rels.children) rel_datum.rels.children = [];\n    rel_datum.rels.children.push(datum.id);\n    return datum\n\n    function addChildToSpouseAndParentToChild(spouse_id) {\n      if (spouse_id === \"_new\") spouse_id = addOtherParent().id;\n\n      const spouse = data_stash.find(d => d.id === spouse_id);\n      datum.rels[spouse.data.gender === 'M' ? 'father' : 'mother'] = spouse.id;\n      if (!spouse.rels.hasOwnProperty('children')) spouse.rels.children = [];\n      spouse.rels.children.push(datum.id);\n\n      function addOtherParent() {\n        const new_spouse = createNewPersonWithGenderFromRel({rel_type: \"spouse\", rel_datum});\n        addSpouse(new_spouse);\n        addNewPerson({data_stash, datum: new_spouse});\n        return new_spouse\n      }\n    }\n  }\n\n  function addParent(datum) {\n    const is_father = datum.data.gender === \"M\",\n      parent_to_add_id = rel_datum.rels[is_father ? 'father' : 'mother'];\n    if (parent_to_add_id) removeToAdd(data_stash.find(d => d.id === parent_to_add_id), data_stash);\n    addNewParent();\n\n    function addNewParent() {\n      rel_datum.rels[is_father ? 'father' : 'mother'] = datum.id;\n      handleSpouse();\n      datum.rels.children = [rel_datum.id];\n      return datum\n\n      function handleSpouse() {\n        const spouse_id = rel_datum.rels[!is_father ? 'father' : 'mother'];\n        if (!spouse_id) return\n        const spouse = data_stash.find(d => d.id === spouse_id);\n        datum.rels.spouses = [spouse_id];\n        if (!spouse.rels.spouses) spouse.rels.spouses = [];\n        spouse.rels.spouses.push(datum.id);\n        return spouse\n      }\n    }\n  }\n\n  function addSpouse(datum) {\n    removeIfToAdd();\n    if (!rel_datum.rels.spouses) rel_datum.rels.spouses = [];\n    rel_datum.rels.spouses.push(datum.id);\n    datum.rels.spouses = [rel_datum.id];\n\n    function removeIfToAdd() {\n      if (!rel_datum.rels.spouses) return\n      rel_datum.rels.spouses.forEach(spouse_id => {\n        const spouse = data_stash.find(d => d.id === spouse_id);\n        if (spouse.to_add) removeToAdd(spouse, data_stash);\n      });\n    }\n  }\n}\n\nfunction createNewPerson({data, rels}) {\n  return {id: generateUUID(), data: data || {}, rels: rels || {}}\n}\n\nfunction createNewPersonWithGenderFromRel({data, rel_type, rel_datum}) {\n  const gender = getGenderFromRelative(rel_datum, rel_type);\n  data = Object.assign(data || {}, {gender});\n  return createNewPerson({data})\n\n  function getGenderFromRelative(rel_datum, rel_type) {\n    return ([\"daughter\", \"mother\"].includes(rel_type) || rel_type === \"spouse\" && rel_datum.data.gender === \"M\") ? \"F\" : \"M\"\n  }\n}\n\nfunction addNewPerson({data_stash, datum}) {\n  data_stash.push(datum);\n}\n\nfunction createTreeDataWithMainNode({data, version}) {\n  return {data: [createNewPerson({data})], version}\n}\n\nfunction addNewPersonAndHandleRels({datum, data_stash, rel_type, rel_datum}) {\n  addNewPerson({data_stash, datum});\n  handleRelsOfNewDatum({datum, data_stash, rel_type, rel_datum});\n}\n\nfunction generateUUID() {\n  var d = new Date().getTime();\n  var d2 = (performance && performance.now && (performance.now()*1000)) || 0;//Time in microseconds since page-load or 0 if unsupported\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16;\n    if(d > 0){//Use timestamp until depleted\n      r = (d + r)%16 | 0;\n      d = Math.floor(d/16);\n    } else {//Use microseconds since page-load if supported\n      r = (d2 + r)%16 | 0;\n      d2 = Math.floor(d2/16);\n    }\n    return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n  });\n}\n\nfunction manualZoom({amount, svg, transition_time=500}) {\n  const zoom = svg.__zoomObj;\n  d3.select(svg).transition().duration(transition_time || 0).delay(transition_time ? 100 : 0)  // delay 100 because of weird error of undefined something in d3 zoom\n    .call(zoom.scaleBy, amount);\n}\n\nfunction isAllRelativeDisplayed(d, data) {\n  const r = d.data.rels,\n    all_rels = [r.father, r.mother, ...(r.spouses || []), ...(r.children || [])].filter(v => v);\n  return all_rels.every(rel_id => data.some(d => d.data.id === rel_id))\n}\n\nfunction handleDuplicateSpouseToggle(tree) {\n  tree.forEach(d => {\n    if (!d.spouse) return\n    const spouse = d.spouse;\n    if (d.duplicate && spouse.data._tgdp_sp) {\n      const parent_id = spouse.data.main ? 'main' : spouse.parent.data.id;\n      if (spouse.data._tgdp_sp[parent_id]?.hasOwnProperty(d.data.id)) {\n        d._toggle = spouse.data._tgdp_sp[parent_id][d.data.id];\n      }\n    }\n  });\n}\n\nfunction handleDuplicateHierarchyProgeny(root, data_stash, on_toggle_one_close_others=true) {\n  const progeny_duplicates = [];\n  loopChildren(root);\n  setToggleIds(progeny_duplicates);\n\n  function loopChildren(d) {\n    if (!d.children) return\n    const p1 = d.data;\n    const spouses = (d.data.rels.spouses || []).map(id => data_stash.find(d => d.id === id));\n\n    const children_by_spouse = getChildrenBySpouse(d);\n    spouses.forEach(p2 => {\n      if (progeny_duplicates.some(d => d.some(d => checkIfDuplicate([p1, p2], [d.p1, d.p2])))) {\n        return\n      }\n      const duplicates = findDuplicates(d, p1, p2);\n      if (duplicates.length > 0) {\n        const all_duplicates = [{d, p1, p2}, ...duplicates];\n        progeny_duplicates.push(all_duplicates);\n        assignDuplicateValues(all_duplicates);\n        handleToggleOff(all_duplicates);\n      } else {\n        let parent_id = root === d ? 'main' : d.parent.data.id;\n        stashTgdpSpouse(d, parent_id, p2);\n        (children_by_spouse[p2.id] || []).forEach(child => {\n          loopChildren(child);\n        });\n      }\n    });\n  }\n\n  function assignDuplicateValues(all_duplicates) {\n    all_duplicates.forEach(({d, p1, p2}, i) => {\n      if (!d.data._tgdp_sp) d.data._tgdp_sp = {};\n      let parent_id = root === d ? 'main' : d.parent.data.id;\n      unstashTgdpSpouse(d, parent_id, p2);\n      if (!d.data._tgdp_sp[parent_id]) d.data._tgdp_sp[parent_id] = {};\n      let val = 1;\n      if (!d.data._tgdp_sp[parent_id].hasOwnProperty(p2.id)) d.data._tgdp_sp[parent_id][p2.id] = val;\n      else val = d.data._tgdp_sp[parent_id][p2.id];\n      all_duplicates[i].val = val;\n    });\n\n    if (on_toggle_one_close_others) {\n      if (all_duplicates.every(d => d.val < 0)) {\n        const first_duplicate = all_duplicates.sort((a, b) => b.val - a.val)[0];\n        const {d, p1, p2} = first_duplicate;\n        const parent_id = root === d ? 'main' : d.parent.data.id;\n        d.data._tgdp_sp[parent_id][p2.id] = 1;\n      }\n  \n      if (all_duplicates.filter(d => d.val > 0).length > 1) {\n        const latest_duplicate = all_duplicates.sort((a, b) => b.val - a.val)[0];\n        all_duplicates.forEach(dupl => {\n          if (dupl === latest_duplicate) return\n          const {d, p1, p2} = dupl;\n          const parent_id = root === d ? 'main' : d.parent.data.id;\n          d.data._tgdp_sp[parent_id][p2.id] = -1;\n        });\n      }\n    }\n  }\n\n  function handleToggleOff(all_duplicates) {\n    all_duplicates.forEach(({d, p1, p2}) => {\n      const parent_id = root === d ? 'main' : d.parent.data.id;\n      if (d.data._tgdp_sp[parent_id][p2.id] < 0) {\n        const children_by_spouse = getChildrenBySpouse(d);\n        if (children_by_spouse[p2.id]) {\n          d.children = d.children.filter(c => !children_by_spouse[p2.id].includes(c));\n          if (d.children.length === 0) delete d.children;\n        }\n      }\n    });\n  }\n\n  function stashTgdpSpouse(d, parent_id, p2) {\n    if (d.data._tgdp_sp && d.data._tgdp_sp[parent_id] && d.data._tgdp_sp[parent_id].hasOwnProperty(p2.id)) {\n      if (!d.data.__tgdp_sp) d.data.__tgdp_sp = {};\n      if (!d.data.__tgdp_sp[parent_id]) d.data.__tgdp_sp[parent_id] = {};\n      d.data.__tgdp_sp[parent_id][p2.id] = d.data._tgdp_sp[parent_id][p2.id];\n      delete d.data._tgdp_sp[parent_id][p2.id];\n    }\n  }\n\n  function unstashTgdpSpouse(d, parent_id, p2) {\n    if (d.data.__tgdp_sp && d.data.__tgdp_sp[parent_id] && d.data.__tgdp_sp[parent_id].hasOwnProperty(p2.id)) {\n      d.data._tgdp_sp[parent_id][p2.id] = d.data.__tgdp_sp[parent_id][p2.id];\n      delete d.data.__tgdp_sp[parent_id][p2.id];\n    }\n  }\n\n  function findDuplicates(datum, partner1, partner2) {\n    const duplicates = [];\n    checkChildren(root);\n    return duplicates\n\n    function checkChildren(d) {\n      if (d === datum) return\n      if (d.children) {\n        const p1 = d.data;\n        const spouses = (d.data.rels.spouses || []).map(id => data_stash.find(d => d.id === id));\n        const children_by_spouse = getChildrenBySpouse(d);\n        spouses.forEach(p2 => {\n          if (checkIfDuplicate([partner1, partner2], [p1, p2])) {\n            duplicates.push({d, p1, p2});\n          } else {\n            (children_by_spouse[p2.id] || []).forEach(child => {\n              checkChildren(child);\n            });\n          }\n        });\n      }\n    }\n  }\n\n  function checkIfDuplicate(arr1, arr2) {\n    return arr1.every(d => arr2.some(d0 => d.id === d0.id))\n  }\n\n  function getChildrenBySpouse(d) {\n    const children_by_spouse = {};\n    const p1 = d;\n    (d.children || []).forEach(child => {\n      const ch_rels = child.data.rels;\n      const p2_id = ch_rels.father === p1.data.id ? ch_rels.mother : ch_rels.father;\n      if (!children_by_spouse[p2_id]) children_by_spouse[p2_id] = [];\n      children_by_spouse[p2_id].push(child);\n    });\n    return children_by_spouse\n  }\n\n  function setToggleIds(progeny_duplicates) {\n    let toggle_id = 0;\n    progeny_duplicates.forEach(dupl_arr => {\n      toggle_id = toggle_id+1;\n      dupl_arr.forEach(d => {\n        if (!d.d._toggle_id_sp) d.d._toggle_id_sp = {};\n        d.d._toggle_id_sp[d.p2.id] = toggle_id;\n      });\n    });\n  }\n}\n\nfunction handleDuplicateHierarchyAncestry(root, on_toggle_one_close_others=true) {\n  const ancestry_duplicates = [];\n\n  loopChildren(root);\n\n  setToggleIds(ancestry_duplicates);\n\n\n  function loopChildren(d) {\n    if (d.children) {\n      if (ancestry_duplicates.some(d0 => d0.includes(d))) {\n        return\n      }\n      const duplicates = findDuplicates(d.children);\n      if (duplicates.length > 0) {\n        const all_duplicates = [d, ...duplicates];\n        ancestry_duplicates.push(all_duplicates);\n        assignDuplicateValues(all_duplicates);\n        handleToggleOff(all_duplicates);\n      } else {\n        d.children.forEach(child => {\n          loopChildren(child);\n        });\n      }\n    }\n  }\n\n  function assignDuplicateValues(all_duplicates) {\n    all_duplicates.forEach(d => {\n      if (!d.data._tgdp) d.data._tgdp = {};\n      const parent_id = root === d ? 'main' : d.parent.data.id;\n      if (!d.data._tgdp[parent_id]) d.data._tgdp[parent_id] = -1;\n      d._toggle = d.data._tgdp[parent_id];\n    });\n\n    if (on_toggle_one_close_others) {\n      if (all_duplicates.every(d => d._toggle < 0)) {\n        const first_duplicate = all_duplicates.sort((a, b) => b._toggle - a._toggle)[0];\n        const d= first_duplicate;\n        const parent_id = root === d ? 'main' : d.parent.data.id;\n        d.data._tgdp[parent_id] = 1;\n      }\n  \n      if (all_duplicates.filter(d => d._toggle > 0).length > 1) {\n        const latest_duplicate = all_duplicates.sort((a, b) => b._toggle - a._toggle)[0];\n        all_duplicates.forEach(dupl => {\n          if (dupl === latest_duplicate) return\n          const d = dupl;\n          const parent_id = root === d ? 'main' : d.parent.data.id;\n          d.data._tgdp[parent_id] = -1;\n        });\n      }\n    }\n  }\n\n  function handleToggleOff(all_duplicates) {\n    all_duplicates.forEach(d => {\n      const parent_id = root === d ? 'main' : d.parent.data.id;\n      if (d.data._tgdp[parent_id] < 0) delete d.children;\n    });\n  }\n\n  function findDuplicates(children_1) {\n    const duplicates = [];\n    checkChildren(root);\n    return duplicates\n\n    function checkChildren(d) {\n      if (d.children) {\n        if (checkIfDuplicate(children_1, d.children)) {\n          duplicates.push(d);\n        } else {\n          d.children.forEach(child => {\n            checkChildren(child);\n          });\n        }\n      }\n    }\n  }\n\n  function checkIfDuplicate(arr1, arr2) {\n    return arr1 !== arr2 && arr1.every(d => arr2.some(d0 => d.data.id === d0.data.id))\n  }\n\n  function setToggleIds(ancestry_duplicates) {\n    let toggle_id = 0;\n    ancestry_duplicates.forEach(dupl_arr => {\n      toggle_id = toggle_id+1;\n      dupl_arr.forEach(d => {\n        d._toggle_id = toggle_id;\n      });\n    });\n  }\n}\n\nfunction CalculateTree({\n    data, main_id=null,\n    node_separation=250,\n    level_separation=150,\n    single_parent_empty_card=true,\n    is_horizontal=false,\n    sortChildrenFunction=undefined,\n    sortSpousesFunction=undefined,\n    ancestry_depth=undefined,\n    progeny_depth=undefined,\n    show_siblings_of_main=false,\n    modifyTreeHierarchy=undefined,\n    private_cards_config=undefined,\n    duplicate_branch_toggle=false,\n    on_toggle_one_close_others=true\n  }) {\n  if (!data || !data.length) return {data: [], data_stash: [], dim: {width: 0, height: 0}, main_id: null}\n  if (is_horizontal) [node_separation, level_separation] = [level_separation, node_separation];\n  const data_stash = single_parent_empty_card ? createRelsToAdd(data) : data;\n  const main = (main_id !== null && data_stash.find(d => d.id === main_id)) || data_stash[0];\n  const tree_children = calculateTreePositions(main, 'children', false);\n  const tree_parents = calculateTreePositions(main, 'parents', true);\n\n  data_stash.forEach(d => d.main = d === main);\n  levelOutEachSide(tree_parents, tree_children);\n  const tree = mergeSides(tree_parents, tree_children);\n  setupChildrenAndParents({tree});\n  setupSpouses({tree, node_separation});\n  if (show_siblings_of_main) setupSiblings({tree, data_stash, node_separation, sortChildrenFunction});\n  setupProgenyParentsPos({tree});\n  nodePositioning({tree});\n  tree.forEach(d => d.all_rels_displayed = isAllRelativeDisplayed(d, tree));\n  setupTid({tree});\n  setupFromTo(tree);\n  if (duplicate_branch_toggle) handleDuplicateSpouseToggle(tree);\n  const dim = calculateTreeDim(tree, node_separation, level_separation);\n\n  return {data: tree, data_stash, dim, main_id: main.id, is_horizontal}\n\n  function calculateTreePositions(datum, rt, is_ancestry) {\n    const hierarchyGetter = rt === \"children\" ? hierarchyGetterChildren : hierarchyGetterParents;\n    const d3_tree = d3.tree().nodeSize([node_separation, level_separation]).separation(separation);\n    const root = d3.hierarchy(datum, hierarchyGetter);\n\n    if (is_ancestry) addSpouseReferences(root);\n    trimTree(root, is_ancestry);\n    if (duplicate_branch_toggle) handleDuplicateHierarchy(root, data_stash, is_ancestry);\n    if (private_cards_config) handlePrivateCards({root, data_stash, is_ancestry, private_cards_config});\n    if (modifyTreeHierarchy) modifyTreeHierarchy(root, is_ancestry);\n    d3_tree(root);\n    \n    return root.descendants()\n\n    function separation(a, b) {\n      let offset = 1;\n      if (!is_ancestry) {\n        if (!sameParent(a, b)) offset+=.25;\n        if (someSpouses(a,b)) offset+=offsetOnPartners(a,b);\n        if (sameParent(a, b) && !sameBothParents(a,b)) offset+=.125;\n      }\n      return offset\n    }\n    function sameParent(a, b) {return a.parent == b.parent}\n    function sameBothParents(a, b) {return (a.data.rels.father === b.data.rels.father) && (a.data.rels.mother === b.data.rels.mother)}\n    function hasSpouses(d) {return d.data.rels.spouses && d.data.rels.spouses.length > 0}\n    function someSpouses(a, b) {return hasSpouses(a) || hasSpouses(b)}\n\n    function hierarchyGetterChildren(d) {\n      const children = [...(d.rels.children || [])].map(id => data_stash.find(d => d.id === id));\n      if (sortChildrenFunction) children.sort(sortChildrenFunction);  // first sort by custom function if provided\n      sortAddNewChildren(children);  // then put new children at the end\n      if (sortSpousesFunction) sortSpousesFunction(d, data_stash);\n      sortChildrenWithSpouses(children, d, data_stash);  // then sort by order of spouses\n      return children\n    }\n\n    function hierarchyGetterParents(d) {\n      return [d.rels.father, d.rels.mother]\n        .filter(d => d).map(id => data_stash.find(d => d.id === id))\n    }\n\n    function offsetOnPartners(a,b) {\n      return ((a.data.rels.spouses || []).length + (b.data.rels.spouses || []).length)*.5\n    }\n  }\n\n  function levelOutEachSide(parents, children) {\n    const mid_diff = (parents[0].x - children[0].x) / 2;\n    parents.forEach(d => d.x-=mid_diff);\n    children.forEach(d => d.x+=mid_diff);\n  }\n\n  function mergeSides(parents, children) {\n    parents.forEach(d => {d.is_ancestry = true;});\n    parents.forEach(d => d.depth === 1 ? d.parent = children[0] : null);\n\n    return [...children, ...parents.slice(1)];\n  }\n  function nodePositioning({tree}) {\n    tree.forEach(d => {\n      d.y *= (d.is_ancestry ? -1 : 1);\n      if (is_horizontal) {\n        const d_x = d.x; d.x = d.y; d.y = d_x;\n      }\n    });\n  }\n\n  function setupSpouses({tree, node_separation}) {\n    for (let i = tree.length; i--;) {\n      const d = tree[i];\n      if (!d.is_ancestry && d.data.rels.spouses && d.data.rels.spouses.length > 0 && !d.is_private){\n        const side = d.data.data.gender === \"M\" ? -1 : 1;  // female on right\n        d.x += d.data.rels.spouses.length/2*node_separation*side;\n        d.data.rels.spouses.forEach((sp_id, i) => {\n          const spouse = {data: data_stash.find(d0 => d0.id === sp_id), added: true};\n\n          spouse.x = d.x-(node_separation*(i+1))*side;\n          spouse.y = d.y;\n          spouse.sx = i > 0 ? spouse.x : spouse.x + (node_separation/2)*side;\n          spouse.sy = i > 0 ? spouse.y : spouse.y + (node_separation/2)*side;\n          spouse.depth = d.depth;\n          spouse.spouse = d;\n          if (!d.spouses) d.spouses = [];\n          d.spouses.push(spouse);\n          tree.push(spouse);\n        });\n      }\n      if (d.parents && d.parents.length === 2) {\n        const p1 = d.parents[0],\n          p2 = d.parents[1],\n          midd = p1.x - (p1.x - p2.x)/2,\n          x = (d,sp) => midd + (node_separation/2)*(d.x < sp.x ? 1 : -1);\n\n        p2.x = x(p1, p2); p1.x = x(p2, p1);\n      }\n    }\n  }\n\n  function setupProgenyParentsPos({tree}) {\n    tree.forEach(d => {\n      if (d.is_ancestry) return\n      if (d.depth === 0) return\n      if (d.added) return\n      if (d.sibling) return\n      const p1 = d.parent;\n      const p2 = (p1.spouses || []).find(d0 => d0.data.id === d.data.rels.father || d0.data.id === d.data.rels.mother);\n      if (p1 && p2) {\n        if (!p1.added && !p2.added) console.error('no added spouse', p1, p2);\n        const added_spouse = p1.added ? p1 : p2;\n        setupParentPos(d, added_spouse);\n      } else if (p1 || p2) {\n        const parent = p1 || p2;\n        parent.sx = parent.x;\n        parent.sy = parent.y;\n        setupParentPos(d, parent);\n      }\n\n      function setupParentPos(d, p) {\n        d.psx = !is_horizontal ? p.sx : p.y;\n        d.psy = !is_horizontal ? p.y : p.sx;\n      }\n    });\n  }\n\n  function setupChildrenAndParents({tree}) {\n    tree.forEach(d0 => {\n      delete d0.children;\n      tree.forEach(d1 => {\n        if (d1.parent === d0) {\n          if (d1.is_ancestry) {\n            if (!d0.parents) d0.parents = [];\n            d0.parents.push(d1);\n          } else {\n            if (!d0.children) d0.children = [];\n            d0.children.push(d1);\n          }\n        }\n      });\n    });\n  }\n\n  function calculateTreeDim(tree, node_separation, level_separation) {\n    if (is_horizontal) [node_separation, level_separation] = [level_separation, node_separation];\n    const w_extent = d3.extent(tree, d => d.x);\n    const h_extent = d3.extent(tree, d => d.y);\n    return {\n      width: w_extent[1] - w_extent[0]+node_separation, height: h_extent[1] - h_extent[0]+level_separation, x_off: -w_extent[0]+node_separation/2, y_off: -h_extent[0]+level_separation/2\n    }\n  }\n\n  function createRelsToAdd(data) {\n    const to_add_spouses = [];\n    for (let i = 0; i < data.length; i++) {\n      const d = data[i];\n      if (d.rels.children && d.rels.children.length > 0) {\n        if (!d.rels.spouses) d.rels.spouses = [];\n        const is_father = d.data.gender === \"M\";\n        let spouse;\n\n        d.rels.children.forEach(d0 => {\n          const child = data.find(d1 => d1.id === d0);\n          if (child.rels[is_father ? 'father' : 'mother'] !== d.id) return\n          if (child.rels[!is_father ? 'father' : 'mother']) return\n          if (!spouse) {\n            spouse = createToAddSpouse(d);\n            d.rels.spouses.push(spouse.id);\n          }\n          spouse.rels.children.push(child.id);\n          child.rels[!is_father ? 'father' : 'mother'] = spouse.id;\n        });\n      }\n    }\n    to_add_spouses.forEach(d => data.push(d));\n    return data\n\n    function createToAddSpouse(d) {\n      const spouse = createNewPerson({\n        data: {gender: d.data.gender === \"M\" ? \"F\" : \"M\"},\n        rels: {spouses: [d.id], children: []}\n      });\n      spouse.to_add = true;\n      to_add_spouses.push(spouse);\n      return spouse\n    }\n  }\n\n  function trimTree(root, is_ancestry) {\n    const max_depth = is_ancestry ? ancestry_depth : progeny_depth;\n    if (!max_depth && max_depth !== 0) return root\n\n    trimNode(root, 0);\n\n    return root\n\n    function trimNode(node, depth) {\n      if (depth === max_depth) {\n        if (node.children) delete node.children;\n      } else if (node.children) {\n        node.children.forEach(child => {\n          trimNode(child, depth+1);\n        });\n      }\n    }\n  }\n\n  function addSpouseReferences(root) {\n    addSpouses(root);\n\n    function addSpouses(d) {\n      if (d.children && d.children.length === 2) {\n        d.children[0]._spouse = d.children[1];\n        d.children[1]._spouse = d.children[0];\n      }\n      if (d.children) d.children.forEach(d0 => addSpouses(d0));\n    }\n  }\n\n  function setupFromTo(tree) {\n    tree.forEach(d => {\n      if (d.data.main) {\n        d.from = [];\n        d.to = [];\n        d.to_ancestry = d.parents;\n      } else if (d.is_ancestry) {\n        d.from = [d.parent];\n        d.to = d.parents;\n      } else {\n        if (d.added) {\n          d.from = [];\n          d.from_spouse = d.spouse;\n          d.to = [];\n          return\n        }\n        if (d.sibling) return\n        const p1 = d.parent;\n        const p2 = (d.parent.spouses || []).find(d0 => d0.data.id === d.data.rels.father || d0.data.id === d.data.rels.mother);\n\n        d.from = [p1];\n        if (p2) d.from.push(p2);\n\n        if (!p1.to) p1.to = [];\n        p1.to.push(d);\n        if (p2) {\n          if (!p2.to) p2.to = [];\n          p2.to.push(d);\n        }\n      }\n    });\n  }\n  \n  function handleDuplicateHierarchy(root, data_stash, is_ancestry) {\n    if (is_ancestry) handleDuplicateHierarchyAncestry(root, on_toggle_one_close_others);\n    else handleDuplicateHierarchyProgeny(root, data_stash, on_toggle_one_close_others);\n  }\n}\n\nfunction setupTid({tree}) {\n  const ids = [];\n  tree.forEach(d => {\n    if (ids.includes(d.data.id)) {\n      const duplicates = tree.filter(d0 => d0.data.id === d.data.id);\n      duplicates.forEach((d0, i) => {\n        d0.tid = `${d.data.id}--x${i+1}`;\n        d0.duplicate = duplicates.length;\n        ids.push(d.data.id);\n      });\n    } else {\n      d.tid = d.data.id;\n      ids.push(d.data.id);\n    }\n  });\n}\n\nfunction createStore(initial_state) {\n  let onUpdate;\n  const state = initial_state;\n  state.main_id_history = []; \n\n  const store = {\n    state,\n    updateTree: (props) => {\n      state.tree = calcTree();\n      if (!state.main_id) updateMainId(state.tree.main_id);\n      if (onUpdate) onUpdate(props);\n    },\n    updateData: data => state.data = data,\n    updateMainId,\n    getMainId: () => state.main_id,\n    getData: () => state.data,\n    getTree: () => state.tree,\n    setOnUpdate: (f) => onUpdate = f,\n\n    getMainDatum,\n    getDatum,\n    getTreeMainDatum,\n    getTreeDatum,\n    getLastAvailableMainDatum,\n\n    methods: {},\n  };\n\n  return store\n\n  function calcTree() {\n    return CalculateTree({\n      data: state.data, main_id: state.main_id,\n      node_separation: state.node_separation, level_separation: state.level_separation,\n      single_parent_empty_card: state.single_parent_empty_card,\n      is_horizontal: state.is_horizontal,\n      sortChildrenFunction: state.sortChildrenFunction,\n      sortSpousesFunction: state.sortSpousesFunction,\n      ancestry_depth: state.ancestry_depth,\n      progeny_depth: state.progeny_depth,\n      show_siblings_of_main: state.show_siblings_of_main,\n      modifyTreeHierarchy: state.modifyTreeHierarchy,\n      private_cards_config: state.private_cards_config,\n      duplicate_branch_toggle: state.duplicate_branch_toggle\n    })\n  }\n\n  function getMainDatum() {\n    return state.data.find(d => d.id === state.main_id)\n  }\n\n  function getDatum(id) {\n    return state.data.find(d => d.id === id)\n  }\n\n  function getTreeMainDatum() {\n    if (!state.tree) return null;\n    return state.tree.data.find(d => d.data.id === state.main_id)\n  }\n\n  function getTreeDatum(id) {\n    if (!state.tree) return null;\n    return state.tree.data.find(d => d.id === id)\n  }\n\n  function updateMainId(id) {\n    if (id === state.main_id) return\n    state.main_id_history = state.main_id_history.filter(d => d !== id).slice(-10);\n    state.main_id_history.push(id);\n    state.main_id = id;\n  }\n\n  // if main_id is deleted, get the last available main_id\n  function getLastAvailableMainDatum() {\n    let main_id = state.main_id_history.slice(0).reverse().find(id => getDatum(id));\n    if (!main_id) main_id = state.data[0].id;\n    if (main_id !== state.main_id) updateMainId(main_id);\n    return getDatum(main_id)\n  }\n}\n\nfunction positionTree({t, svg, transition_time=2000}) {\n  const el_listener = svg.__zoomObj ? svg : svg.parentNode;  // if we need listener for svg and html, we will use parent node\n  const zoom = el_listener.__zoomObj;\n\n  d3.select(el_listener).transition().duration(transition_time || 0).delay(transition_time ? 100 : 0)  // delay 100 because of weird error of undefined something in d3 zoom\n    .call(zoom.transform, d3.zoomIdentity.scale(t.k).translate(t.x, t.y));\n}\n\nfunction treeFit({svg, svg_dim, tree_dim, with_transition, transition_time}) {\n  const t = calculateTreeFit(svg_dim, tree_dim);\n  positionTree({t, svg, with_transition, transition_time});\n}\n\nfunction calculateTreeFit(svg_dim, tree_dim) {\n  let k = Math.min(svg_dim.width / tree_dim.width, svg_dim.height / tree_dim.height);\n  if (k > 1) k = 1;\n  const x = tree_dim.x_off + (svg_dim.width - tree_dim.width*k)/k/2;\n  const y = tree_dim.y_off + (svg_dim.height - tree_dim.height*k)/k/2;\n\n  return {k,x,y}\n}\n\nfunction cardToMiddle({datum, svg, svg_dim, scale, transition_time}) {\n  const k = scale || 1, x = svg_dim.width/2-datum.x*k, y = svg_dim.height/2-datum.y,\n    t = {k, x: x/k, y: y/k};\n  positionTree({t, svg, with_transition: true, transition_time});\n}\n\nfunction createLinks({d, tree, is_horizontal=false}) {\n  const links = [];\n  // d.spouses is always added to non-ancestry side for main blodline nodes\n  // d._spouse is added to ancestry side\n  if (d.spouses || d._spouse) handleSpouse({d});\n  handleAncestrySide({d});\n  handleProgenySide({d});\n\n  return links;\n\n  function handleAncestrySide({d}) {\n    if (!d.parents) return\n    const p1 = d.parents[0];\n    const p2 = d.parents[1] || p1;\n\n    const p = {x: getMid(p1, p2, 'x'), y: getMid(p1, p2, 'y')};\n\n    links.push({\n      d: Link(d, p),\n      _d: () => {\n        const _d = {x: d.x, y: d.y},\n          _p = {x: d.x, y: d.y};\n        return Link(_d, _p)\n      },\n      curve: true, \n      id: linkId(d, p1, p2), \n      depth: d.depth+1, \n      is_ancestry: true,\n      source: d,\n      target: [p1, p2]\n    });\n  }\n\n\n  function handleProgenySide({d}) {\n    if (!d.children || d.children.length === 0) return\n\n    d.children.forEach((child, i) => {\n      const other_parent = otherParent(child, d) || d;\n      const sx = other_parent.sx;\n\n      const parent_pos = !is_horizontal ? {x: sx, y: d.y} : {x: d.x, y: sx};\n      links.push({\n        d: Link(child, parent_pos),\n        _d: () => Link(parent_pos, {x: _or(parent_pos, 'x'), y: _or(parent_pos, 'y')}),\n        curve: true,\n        id: linkId(child, d, other_parent),\n        depth: d.depth+1,\n        is_ancestry: false,\n        source: [d, other_parent],\n        target: child\n      });\n    });\n  }\n\n\n  function handleSpouse({d}) {\n    if (d.spouses) {\n      d.spouses.forEach(spouse => links.push(createSpouseLink(d, spouse)));\n    } else if (d._spouse) {\n      links.push(createSpouseLink(d, d._spouse));\n    }\n\n    function createSpouseLink(d, spouse) {\n      return {\n        d: [[d.x, d.y], [spouse.x, spouse.y]],\n        _d: () => [\n          d.is_ancestry ? [_or(d, 'x')-.0001, _or(d, 'y')] : [d.x, d.y], // add -.0001 to line to have some length if d.x === spouse.x\n          d.is_ancestry ? [_or(spouse, 'x'), _or(spouse, 'y')] : [d.x-.0001, d.y]\n        ],\n        curve: false, \n        id: linkId(d, spouse), \n        depth: d.depth, \n        spouse: true, \n        is_ancestry: spouse.is_ancestry, \n        source: d, \n        target: spouse\n      }\n    }\n  }\n\n  ///\n  function getMid(d1, d2, side, is_) {\n    if (is_) return _or(d1, side) - (_or(d1, side) - _or(d2, side))/2\n    else return d1[side] - (d1[side] - d2[side])/2\n  }\n\n  function _or(d, k) {\n   return d.hasOwnProperty('_'+k) ? d['_'+k] : d[k]\n  }\n\n  function Link(d, p) {\n    return is_horizontal ? LinkHorizontal(d, p) : LinkVertical(d, p)\n  }\n\n  function LinkVertical(d, p) {\n    const hy = (d.y + (p.y - d.y) / 2);\n    return [\n      [d.x, d.y],\n      [d.x, hy],\n      [d.x, hy],\n      [p.x, hy],\n      [p.x, hy],\n      [p.x, p.y],\n    ]\n  }\n\n  function LinkHorizontal(d, p) {\n    const hx = (d.x + (p.x - d.x) / 2);\n    return [\n      [d.x, d.y],\n      [hx, d.y],\n      [hx, d.y],\n      [hx, p.y],\n      [hx, p.y],\n      [p.x, p.y],\n    ]\n  }\n\n  function linkId(...args) {\n    return args.map(d => d.tid).sort().join(\", \")  // make unique id\n  }\n\n  function otherParent(child, p1) {\n    const p2 = (p1.spouses || []).find(d => d.data.id === child.data.rels.mother || d.data.id === child.data.rels.father);\n    return p2\n  }\n}\n\nfunction pathToMain(cards, links, datum, main_datum) {\n  const is_ancestry = datum.is_ancestry;\n  const links_data = links.data();\n  let links_node_to_main = [];\n  let cards_node_to_main = [];\n\n  if (is_ancestry) {\n    const links_to_main = [];\n\n    let parent = datum;\n    let itteration1 = 0;\n    while (parent !== main_datum.data && itteration1 < 100) {\n      itteration1++;  // to prevent infinite loop\n      const spouse_link = links_data.find(d => d.spouse === true && (d.source === parent || d.target === parent));\n      if (spouse_link) {\n        const child_links = links_data.filter(d => Array.isArray(d.target) && d.target.includes(spouse_link.source) && d.target.includes(spouse_link.target));\n        const child_link = getChildLinkFromAncestrySide(child_links, main_datum);\n\n        if (!child_link) break\n        links_to_main.push(spouse_link);\n        links_to_main.push(child_link);\n        parent = child_link.source;\n      } else {\n        // single parent\n        const child_links = links_data.filter(d => Array.isArray(d.target) && d.target.includes(parent));\n        const child_link = getChildLinkFromAncestrySide(child_links, main_datum);\n\n        if (!child_link) break\n        links_to_main.push(child_link);\n        parent = child_link.source;\n      }\n    }\n    links.each(function(d) {\n      if (links_to_main.includes(d)) {\n        links_node_to_main.push({link: d, node: this});\n      }\n    });\n\n    const cards_to_main = getCardsToMain(datum, links_to_main);\n    cards.each(function(d) {\n      if (cards_to_main.includes(d)) {\n        cards_node_to_main.push({card: d, node: this});\n      }\n    });\n  } else if (datum.spouse && datum.spouse.data === main_datum.data) {\n    links.each(function(d) {\n      if (d.target === datum) links_node_to_main.push({link: d, node: this});\n    });\n    const cards_to_main = [main_datum, datum];\n    cards.each(function(d) {\n      if (cards_to_main.includes(d)) {\n        cards_node_to_main.push({card: d, node: this});\n      }\n    });\n  } else if (datum.sibling) {\n    links.each(function(d) {\n      if (d.source === datum) links_node_to_main.push({link: d, node: this});\n      if (d.source === main_datum && d.target.length === 2) links_node_to_main.push({link: d, node: this});\n      if (datum.parents.includes(d.source) && datum.parents.includes(d.target)) links_node_to_main.push({link: d, node: this});\n    });\n    const cards_to_main = [main_datum, datum, ...datum.parents];\n    cards.each(function(d) {\n      if (cards_to_main.includes(d)) {\n        cards_node_to_main.push({card: d, node: this});\n      }\n    });\n  } else {\n    let links_to_main = [];\n\n    let child = datum;\n    let itteration1 = 0;\n    while (child !== main_datum.data && itteration1 < 100) {\n      itteration1++;  // to prevent infinite loop\n      const child_link = links_data.find(d => d.target === child && Array.isArray(d.source));\n      if (child_link) {\n        const spouse_link = links_data.find(d => d.spouse === true && sameArray([d.source, d.target], child_link.source));\n        links_to_main.push(child_link);\n        links_to_main.push(spouse_link);\n        if (spouse_link) child = spouse_link.source;\n        else child = child_link.source[0];\n      } else {\n        const spouse_link = links_data.find(d => d.target === child && !Array.isArray(d.source));  // spouse link\n        if (!spouse_link) break\n        links_to_main.push(spouse_link);\n        child = spouse_link.source;\n      }\n    }\n\n    links.each(function(d) {\n      if (links_to_main.includes(d)) {\n        links_node_to_main.push({link: d, node: this});\n      }\n    });\n\n    const cards_to_main = getCardsToMain(main_datum, links_to_main);\n    cards.each(function(d) {\n      if (cards_to_main.includes(d)) {\n        cards_node_to_main.push({card: d, node: this});\n      }\n    });\n  }\n  return [cards_node_to_main, links_node_to_main]\n\n  function sameArray(arr1, arr2) {\n    return arr1.every(d1 => arr2.some(d2 => d1 === d2))\n  }\n\n  function getCardsToMain(first_parent, links_to_main) {\n    const all_cards = links_to_main.filter(d => d).reduce((acc, d) => {\n      if (Array.isArray(d.target)) acc.push(...d.target);\n      else acc.push(d.target);\n      if (Array.isArray(d.source)) acc.push(...d.source);\n      else acc.push(d.source);\n      return acc\n    }, []);\n\n    const cards_to_main = [main_datum, datum];\n    getChildren(first_parent);\n    return cards_to_main\n\n    function getChildren(d) {\n      if (d.data.rels.children) {\n        d.data.rels.children.forEach(child_id => {\n          const child = all_cards.find(d0 => d0.data.id === child_id);\n          if (child) {\n            cards_to_main.push(child);\n            getChildren(child);\n          }\n        });\n      }\n    }\n  }\n\n  function getChildLinkFromAncestrySide(child_links, main_datum) {\n    if (child_links.length === 0) return null\n    else if (child_links.length === 1) return child_links[0]\n    else {\n      // siblings of main\n      // should be last level where we go to the main and not its siblings\n      return child_links.find(d => d.source === main_datum)\n    }\n  }\n}\n\nfunction createPath(d, is_) {\n  const line = d3.line().curve(d3.curveMonotoneY),\n    lineCurve = d3.line().curve(d3.curveBasis),\n    path_data = is_ ? d._d() : d.d;\n\n  if (!d.curve) return line(path_data)\n  else if (d.curve === true) return lineCurve(path_data)\n}\n\nfunction updateLinks(svg, tree, props={}) {\n  const links_data_dct = tree.data.reduce((acc, d) => {\n    createLinks({d, tree:tree.data, is_horizontal: tree.is_horizontal}).forEach(l => acc[l.id] = l);\n    return acc\n  }, {});\n  const links_data = Object.values(links_data_dct);\n  const link = d3.select(svg).select(\".links_view\").selectAll(\"path.link\").data(links_data, d => d.id);\n  const link_exit = link.exit();\n  const link_enter = link.enter().append(\"path\").attr(\"class\", \"link\");\n  const link_update = link_enter.merge(link);\n\n  link_exit.each(linkExit);\n  link_enter.each(linkEnter);\n  link_update.each(linkUpdate);\n\n  function linkEnter(d) {\n    d3.select(this).attr(\"fill\", \"none\").attr(\"stroke\", \"#fff\").attr(\"stroke-width\", 1).style(\"opacity\", 0)\n      .attr(\"d\", createPath(d, true));\n  }\n\n  function linkUpdate(d) {\n    const path = d3.select(this);\n    const delay = props.initial ? calculateDelay(tree, d, props.transition_time) : 0;\n    path.transition('path').duration(props.transition_time).delay(delay).attr(\"d\", createPath(d)).style(\"opacity\", 1);\n  }\n\n  function linkExit(d) {\n    const path = d3.select(this);\n    path.transition('op').duration(800).style(\"opacity\", 0);\n    path.transition('path').duration(props.transition_time).attr(\"d\", createPath(d, true))\n      .on(\"end\", () => path.remove());\n  }\n\n}\n\nfunction updateCards(svg, tree, Card, props={}) {\n  const card = d3.select(svg).select(\".cards_view\").selectAll(\"g.card_cont\").data(tree.data, d => d.data.id),\n    card_exit = card.exit(),\n    card_enter = card.enter().append(\"g\").attr(\"class\", \"card_cont\"),\n    card_update = card_enter.merge(card);\n\n  card_exit.each(d => calculateEnterAndExitPositions(d, false, true));\n  card_enter.each(d => calculateEnterAndExitPositions(d, true, false));\n\n  card_exit.each(cardExit);\n  card.each(cardUpdateNoEnter);\n  card_enter.each(cardEnter);\n  card_update.each(cardUpdate);\n\n  function cardEnter(d) {\n    d3.select(this)\n      .attr(\"transform\", `translate(${d._x}, ${d._y})`)\n      .style(\"opacity\", 0);\n\n    Card.call(this, d);\n  }\n\n  function cardUpdateNoEnter(d) {}\n\n  function cardUpdate(d) {\n    Card.call(this, d);\n    const delay = props.initial ? calculateDelay(tree, d, props.transition_time) : 0;\n    d3.select(this).transition().duration(props.transition_time).delay(delay).attr(\"transform\", `translate(${d.x}, ${d.y})`).style(\"opacity\", 1);\n  }\n\n  function cardExit(d) {\n    const g = d3.select(this);\n    g.transition().duration(props.transition_time).style(\"opacity\", 0).attr(\"transform\", `translate(${d._x}, ${d._y})`)\n      .on(\"end\", () => g.remove());\n  }\n}\n\nfunction updateCardsHtml(div, tree, Card, props={}) {\n  const card = d3.select(div).select(\".cards_view\").selectAll(\"div.card_cont\").data(tree.data, d => d.tid),\n    card_exit = card.exit(),\n    card_enter = card.enter().append(\"div\").attr(\"class\", \"card_cont\").style('pointer-events', 'none'),\n    card_update = card_enter.merge(card);\n\n  card_exit.each(d => calculateEnterAndExitPositions(d, false, true));\n  card_enter.each(d => calculateEnterAndExitPositions(d, true, false));\n\n  card_exit.each(cardExit);\n  card.each(cardUpdateNoEnter);\n  card_enter.each(cardEnter);\n  card_update.each(cardUpdate);\n\n  function cardEnter(d) {\n    d3.select(this)\n      .style('position', 'absolute')\n      .style('top', '0').style('left', '0')\n      .style(\"transform\", `translate(${d._x}px, ${d._y}px)`)\n      .style(\"opacity\", 0);\n\n    Card.call(this, d);\n  }\n\n  function cardUpdateNoEnter(d) {}\n\n  function cardUpdate(d) {\n    Card.call(this, d);\n    const delay = props.initial ? calculateDelay(tree, d, props.transition_time) : 0;\n    d3.select(this).transition().duration(props.transition_time).delay(delay).style(\"transform\", `translate(${d.x}px, ${d.y}px)`).style(\"opacity\", 1);\n  }\n\n  function cardExit(d) {\n    const g = d3.select(this);\n    g.transition().duration(props.transition_time).style(\"opacity\", 0).style(\"transform\", `translate(${d._x}px, ${d._y}px)`)\n      .on(\"end\", () => g.remove());\n  }\n}\n\nfunction assignUniqueIdToTreeData(div, tree_data) {\n  const card = d3.select(div).selectAll(\"div.card_cont_2fake\").data(tree_data, d => d.data.id);  // how this doesn't break if there is multiple cards with the same id?\n  const card_exit = card.exit();\n  const card_enter = card.enter().append(\"div\").attr(\"class\", \"card_cont_2fake\").style('display', 'none').attr(\"data-id\", () => Math.random());\n  const card_update = card_enter.merge(card);\n\n  card_exit.each(cardExit);\n  card_enter.each(cardEnter);\n  card_update.each(cardUpdate);\n\n  function cardEnter(d) {\n    d.unique_id = d3.select(this).attr(\"data-id\");\n  }\n\n  function cardUpdate(d) {\n    d.unique_id = d3.select(this).attr(\"data-id\");\n  }\n\n  function cardExit(d) {\n    d.unique_id = d3.select(this).attr(\"data-id\");\n    d3.select(this).remove();\n  }\n}\n\nfunction setupHtmlSvg(getHtmlSvg) {\n  d3.select(getHtmlSvg()).append(\"div\").attr(\"class\", \"cards_view_fake\").style('display', 'none');  // important for handling data\n}\n\nfunction getCardsViewFake(getHtmlSvg) {\n  return d3.select(getHtmlSvg()).select(\"div.cards_view_fake\").node()\n}\n\nfunction onZoomSetup(getSvgView, getHtmlView) {\n  return function onZoom(e) {\n    const t = e.transform;\n  \n    d3.select(getSvgView()).style('transform', `translate(${t.x}px, ${t.y}px) scale(${t.k}) `);\n    d3.select(getHtmlView()).style('transform', `translate(${t.x}px, ${t.y}px) scale(${t.k}) `);\n  }\n}\n\nfunction setupReactiveTreeData(getHtmlSvg) {\n  let tree_data = [];\n\n  return function getReactiveTreeData(new_tree_data) {\n    const tree_data_exit = getTreeDataExit(new_tree_data, tree_data);\n    tree_data = [...new_tree_data, ...tree_data_exit];\n    assignUniqueIdToTreeData(getCardsViewFake(getHtmlSvg), tree_data);\n    return tree_data\n  }\n}\n\nfunction createHtmlSvg(cont) {\n  const f3Canvas = d3.select(cont).select('#f3Canvas');\n  const cardHtml = f3Canvas.append('div').attr('id', 'htmlSvg')\n    .attr('style', 'position: absolute; width: 100%; height: 100%; z-index: 2; top: 0; left: 0');\n  cardHtml.append('div').attr('class', 'cards_view').style('transform-origin', '0 0');\n  setupHtmlSvg(() => cardHtml.node());\n\n  return cardHtml.node()\n}\n\nfunction getTreeDataExit(new_tree_data, old_tree_data) {\n  if (old_tree_data.length > 0) {\n    return old_tree_data.filter(d => !new_tree_data.find(t => t.data.id === d.data.id))\n  } else {\n    return []\n  }\n}\n\nfunction getUniqueId(d) {\n  return d.unique_id\n}\n\nvar htmlHandlers = /*#__PURE__*/Object.freeze({\n__proto__: null,\nassignUniqueIdToTreeData: assignUniqueIdToTreeData,\nsetupHtmlSvg: setupHtmlSvg,\ngetCardsViewFake: getCardsViewFake,\nonZoomSetup: onZoomSetup,\nsetupReactiveTreeData: setupReactiveTreeData,\ncreateHtmlSvg: createHtmlSvg,\ngetUniqueId: getUniqueId\n});\n\nfunction updateCardsComponent(div, tree, Card, props={}) {\n  const card = d3.select(getCardsViewFake(() => div)).selectAll(\"div.card_cont_fake\").data(tree.data, d => d.data.id),\n    card_exit = card.exit(),\n    card_enter = card.enter().append(\"div\").attr(\"class\", \"card_cont_fake\").style('display', 'none'),\n    card_update = card_enter.merge(card);\n\n  card_exit.each(d => calculateEnterAndExitPositions(d, false, true));\n  card_enter.each(d => calculateEnterAndExitPositions(d, true, false));\n\n  card_exit.each(cardExit);\n  card.each(cardUpdateNoEnter);\n  card_enter.each(cardEnter);\n  card_update.each(cardUpdate);\n\n  function cardEnter(d) {\n    const card_element = d3.select(Card(d));\n\n    card_element\n      .style('position', 'absolute')\n      .style('top', '0').style('left', '0').style(\"opacity\", 0)\n      .style(\"transform\", `translate(${d._x}px, ${d._y}px)`);\n  }\n\n  function cardUpdateNoEnter(d) {}\n\n  function cardUpdate(d) {\n    const card_element = d3.select(Card(d));\n    const delay = props.initial ? calculateDelay(tree, d, props.transition_time) : 0;\n    card_element.transition().duration(props.transition_time).delay(delay).style(\"transform\", `translate(${d.x}px, ${d.y}px)`).style(\"opacity\", 1);\n  }\n\n  function cardExit(d) {\n    const card_element = d3.select(Card(d));\n    const g = d3.select(this);\n    card_element.transition().duration(props.transition_time).style(\"opacity\", 0).style(\"transform\", `translate(${d._x}px, ${d._y}px)`)\n      .on(\"end\", () => g.remove()); // remove the card_cont_fake\n  }\n}\n\nfunction view(tree, svg, Card, props={}) {\n\n  props.initial = props.hasOwnProperty('initial') ? props.initial : !d3.select(svg.parentNode).select('.card_cont').node();\n  props.transition_time = props.hasOwnProperty('transition_time') ? props.transition_time : 2000;\n  if (props.cardComponent) updateCardsComponent(props.cardComponent, tree, Card, props);\n  else if (props.cardHtml) updateCardsHtml(props.cardHtml, tree, Card, props);\n  else updateCards(svg, tree, Card, props);\n  updateLinks(svg, tree, props);\n\n  const tree_position = props.tree_position || 'fit';\n  if (props.initial) treeFit({svg, svg_dim: svg.getBoundingClientRect(), tree_dim: tree.dim, transition_time: 0});\n  else if (tree_position === 'fit') treeFit({svg, svg_dim: svg.getBoundingClientRect(), tree_dim: tree.dim, transition_time: props.transition_time});\n  else if (tree_position === 'main_to_middle') cardToMiddle({datum: tree.data[0], svg, svg_dim: svg.getBoundingClientRect(), scale: props.scale, transition_time: props.transition_time});\n  else ;\n\n  return true\n}\n\nfunction calculateDelay(tree, d, transition_time) {\n  const delay_level = transition_time*.4,\n    ancestry_levels = Math.max(...tree.data.map(d=>d.is_ancestry ? d.depth : 0));\n  let delay = d.depth*delay_level;\n  if ((d.depth !== 0 || !!d.spouse) && !d.is_ancestry) {\n    delay+=(ancestry_levels)*delay_level;  // after ancestry\n    if (d.spouse) delay+=delay_level;  // spouse after bloodline\n    delay+=(d.depth)*delay_level;  // double the delay for each level because of additional spouse delay\n  }\n  return delay\n}\n\nfunction createSvg(cont, props={}) {\n  const svg_dim = cont.getBoundingClientRect();\n  const svg_html = (`\n    <svg class=\"main_svg\">\n      <rect width=\"${svg_dim.width}\" height=\"${svg_dim.height}\" fill=\"transparent\" />\n      <g class=\"view\">\n        <g class=\"links_view\"></g>\n        <g class=\"cards_view\"></g>\n      </g>\n      <g style=\"transform: translate(100%, 100%)\">\n        <g class=\"fit_screen_icon cursor-pointer\" style=\"transform: translate(-50px, -50px); display: none\">\n          <rect width=\"27\" height=\"27\" stroke-dasharray=\"${27/2}\" stroke-dashoffset=\"${27/4}\" \n            style=\"stroke:#fff;stroke-width:4px;fill:transparent;\"/>\n          <circle r=\"5\" cx=\"${27/2}\" cy=\"${27/2}\" style=\"fill:#fff\" />          \n        </g>\n      </g>\n    </svg>\n  `);\n\n  const f3Canvas = getOrCreateF3Canvas(cont);\n\n  const temp_div = d3.create('div').node();\n  temp_div.innerHTML = svg_html;\n  const svg = temp_div.querySelector('svg');\n  f3Canvas.appendChild(svg);\n\n  cont.appendChild(f3Canvas);\n\n  setupZoom(f3Canvas, props);\n\n  return svg\n\n  function getOrCreateF3Canvas(cont) {\n    let f3Canvas = cont.querySelector('#f3Canvas');\n    if (!f3Canvas) {\n      f3Canvas = d3.create('div').attr('id', 'f3Canvas').attr('style', 'position: relative; overflow: hidden; width: 100%; height: 100%;').node();\n    }\n    return f3Canvas\n  }\n}\n\nfunction setupZoom(el, props={}) {\n  if (el.__zoom) return\n  const view = el.querySelector('.view'),\n    zoom = d3.zoom().on(\"zoom\", (props.onZoom || zoomed));\n\n  d3.select(el).call(zoom);\n  el.__zoomObj = zoom;\n\n  if (props.zoom_polite) zoom.filter(zoomFilter);\n\n  function zoomed(e) {\n    d3.select(view).attr(\"transform\", e.transform);\n  }\n\n  function zoomFilter(e) {\n    if (e.type === \"wheel\" && !e.ctrlKey) return false\n    else if (e.touches && e.touches.length < 2) return false\n    else return true\n  }\n}\n\nfunction cardChangeMain(store, {d}) {\n  toggleAllRels(store.getTree().data, false);\n  store.updateMainId(d.data.id);\n  store.updateTree({tree_position: store.state.tree_fit_on_change});\n  return true\n}\n\nfunction cardEdit(store, {d, cardEditForm}) {\n  const datum = d.data,\n    postSubmit = (props) => {\n      if (datum.to_add) moveToAddToAdded(datum, store.getData());\n      if (props && props.delete) {\n        if (datum.main) store.updateMainId(null);\n        deletePerson(datum, store.getData());\n      }\n      store.updateTree();\n    };\n  cardEditForm({datum, postSubmit, store});\n}\n\nfunction cardShowHideRels(store, {d}) {\n  d.data.hide_rels = !d.data.hide_rels;\n  toggleRels(d, d.data.hide_rels);\n  store.updateTree({tree_position: store.state.tree_fit_on_change});\n}\n\nfunction userIcon() {\n  return (`\n    <g data-icon=\"user\">\n      ${bgCircle()}\n      <path d=\"M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z\" />\n    </g>\n  `)\n}\n\nfunction userEditIcon() {\n  return (`\n    <g data-icon=\"user-edit\">\n      ${bgCircle()}\n      <path d=\"M21.7,13.35L20.7,14.35L18.65,12.3L19.65,11.3C19.86,11.09 20.21,11.09 20.42,11.3L21.7,12.58C21.91,\n      12.79 21.91,13.14 21.7,13.35M12,18.94L18.06,12.88L20.11,14.93L14.06,21H12V18.94M12,14C7.58,14 4,15.79 4,\n      18V20H10V18.11L14,14.11C13.34,14.03 12.67,14 12,14M12,4A4,4 0 0,0 8,8A4,4 0 0,0 12,12A4,4 0 0,0 16,8A4,4 0 0,0 12,4Z\" />\n    </g>\n  `)\n}\n\nfunction userPlusIcon() {\n  return (`\n    <g data-icon=\"user-plus\">\n      ${bgCircle()}\n      <path d=\"M15,14C12.33,14 7,15.33 7,18V20H23V18C23,15.33 17.67,14 15,14M6,10V7H4V10H1V12H4V15H6V12H9V10M15,12A4,4 0 0,0 19,8A4,4 0 0,0 15,4A4,4 0 0,0 11,8A4,4 0 0,0 15,12Z\" />\n    </g>\n  `)\n}\n\nfunction userPlusCloseIcon() {\n  return (`\n    <g data-icon=\"user-plus-close\">\n      ${bgCircle()}\n      <path d=\"M15,14C12.33,14 7,15.33 7,18V20H23V18C23,15.33 17.67,14 15,14M6,10V7H4V10H1V12H4V15H6V12H9V10M15,12A4,4 0 0,0 19,8A4,4 0 0,0 15,4A4,4 0 0,0 11,8A4,4 0 0,0 15,12Z\" />\n      <line x1=\"3\" y1=\"3\" x2=\"24\" y2=\"24\" stroke=\"currentColor\" stroke-width=\"2\" />\n    </g>\n  `)\n}\n\nfunction plusIcon() {\n  return (`\n    <g data-icon=\"plus\">\n      ${bgCircle()}\n      <path d=\"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z\" />\n    </g>\n  `)\n}\n\nfunction pencilIcon() {\n  return (`\n    <g data-icon=\"pencil\">\n      ${bgCircle()}\n      <path d=\"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z\" />\n    </g>\n  `)\n}\n\nfunction pencilOffIcon() {\n  return (`\n    <g data-icon=\"pencil-off\">\n      ${bgCircle()}\n      <path d=\"M18.66,2C18.4,2 18.16,2.09 17.97,2.28L16.13,4.13L19.88,7.88L21.72,6.03C22.11,5.64 22.11,5 21.72,4.63L19.38,2.28C19.18,2.09 18.91,2 18.66,2M3.28,4L2,5.28L8.5,11.75L4,16.25V20H7.75L12.25,15.5L18.72,22L20,20.72L13.5,14.25L9.75,10.5L3.28,4M15.06,5.19L11.03,9.22L14.78,12.97L18.81,8.94L15.06,5.19Z\" />\n    </g>\n  `)\n}\n\nfunction trashIcon() {\n  return (`\n    <g data-icon=\"trash\">\n      ${bgCircle()}\n      <path d=\"M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z\" />\n    </g>\n  `)\n}\n\nfunction historyBackIcon() {\n  return (`\n    <g data-icon=\"history-back\">\n      ${bgCircle()}\n      <path d=\"M20 13.5C20 17.09 17.09 20 13.5 20H6V18H13.5C16 18 18 16 18 13.5S16 9 13.5 9H7.83L10.91 12.09L9.5 13.5L4 8L9.5 2.5L10.92 3.91L7.83 7H13.5C17.09 7 20 9.91 20 13.5Z\" />\n    </g>\n  `)\n}\n\nfunction historyForwardIcon() {\n  return (`\n    <g data-icon=\"history-forward\">\n      ${bgCircle()}\n      <path d=\"M10.5 18H18V20H10.5C6.91 20 4 17.09 4 13.5S6.91 7 10.5 7H16.17L13.08 3.91L14.5 2.5L20 8L14.5 13.5L13.09 12.09L16.17 9H10.5C8 9 6 11 6 13.5S8 18 10.5 18Z\" />\n    </g>\n  `)\n}\n\nfunction personIcon() {\n  return (`\n    <g data-icon=\"person\">\n      <path d=\"M256 288c79.5 0 144-64.5 144-144S335.5 0 256 0 112 \n        64.5 112 144s64.5 144 144 144zm128 32h-55.1c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16H128C57.3 320 0 377.3 \n        0 448v16c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48v-16c0-70.7-57.3-128-128-128z\" />\n    </g>\n  `)\n}\n\nfunction miniTreeIcon() {\n  return (`\n    <g transform=\"translate(31,25)\" data-icon=\"mini-tree\">\n      <rect x=\"-31\" y=\"-25\" width=\"72\" height=\"15\" fill=\"rgba(0,0,0,0)\"></rect>\n      <g>\n        <rect x=\"-31\" y=\"-25\" width=\"72\" height=\"15\" fill=\"rgba(0,0,0,0)\"></rect>\n        <line y2=\"-17.5\" stroke=\"#fff\" />\n        <line x1=\"-20\" x2=\"20\" y1=\"-17.5\" y2=\"-17.5\" stroke=\"#fff\" />\n        <rect x=\"-31\" y=\"-25\" width=\"25\" height=\"15\" rx=\"5\" ry=\"5\" class=\"card-male\" />\n        <rect x=\"6\" y=\"-25\" width=\"25\" height=\"15\" rx=\"5\" ry=\"5\" class=\"card-female\" />\n      </g>\n    </g>\n  `)\n}\n\nfunction toggleIconOn() {\n  return (`\n    <g data-icon=\"toggle-on\">\n      ${bgCircle()}\n      <circle class=\"f3-small-circle\" r=\"4\" cx=\"18\" cy=\"12\" />\n      <path d=\"M17,7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7M17,15A3,3 0 0,1 14,12A3,3 0 0,1 17,9A3,3 0 0,1 20,12A3,3 0 0,1 17,15Z\" />\n    </g>\n  `)\n}\n\nfunction toggleIconOff() {\n  return (`\n    <g data-icon=\"toggle-off\">\n      ${bgCircle()}\n      <circle class=\"f3-small-circle\" r=\"4\" cx=\"6\" cy=\"12\" />\n      <path d=\"M17,7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7M7,15A3,3 0 0,1 4,12A3,3 0 0,1 7,9A3,3 0 0,1 10,12A3,3 0 0,1 7,15Z\" />\n    </g>\n  `)\n}\n\nfunction userSvgIcon() { return svgWrapper(userIcon()) }\nfunction userEditSvgIcon() { return svgWrapper(userEditIcon()) }\nfunction userPlusSvgIcon() { return svgWrapper(userPlusIcon()) }\nfunction userPlusCloseSvgIcon() { return svgWrapper(userPlusCloseIcon()) }\nfunction plusSvgIcon() { return svgWrapper(plusIcon()) }\nfunction pencilSvgIcon() { return svgWrapper(pencilIcon()) }\nfunction pencilOffSvgIcon() { return svgWrapper(pencilOffIcon()) }\nfunction trashSvgIcon() { return svgWrapper(trashIcon()) }\nfunction historyBackSvgIcon() { return svgWrapper(historyBackIcon()) }\nfunction historyForwardSvgIcon() { return svgWrapper(historyForwardIcon()) }\nfunction personSvgIcon() { return svgWrapper(personIcon(), '0 0 512 512') }\nfunction miniTreeSvgIcon() { return svgWrapper(miniTreeIcon(), '0 0 72 25') }\nfunction toggleSvgIconOn() { return svgWrapper(toggleIconOn()) }\nfunction toggleSvgIconOff() { return svgWrapper(toggleIconOff()) }\n\nfunction svgWrapper(icon, viewBox='0 0 24 24') {\n  const match = icon.match(/data-icon=\"([^\"]+)\"/);\n  const dataIcon = match ? `data-icon=\"${match[1]}\"` : '';\n  \n  return (`\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"${viewBox}\" style=\"fill: currentColor\" ${dataIcon}>\n      ${icon}\n    </svg>\n  `)\n}\n\nfunction bgCircle() {\n  return (`\n    <circle r=\"12\" cx=\"12\" cy=\"12\" style=\"fill: rgba(0,0,0,0)\" />\n  `)\n}\n\nvar icons = /*#__PURE__*/Object.freeze({\n__proto__: null,\nuserIcon: userIcon,\nuserEditIcon: userEditIcon,\nuserPlusIcon: userPlusIcon,\nuserPlusCloseIcon: userPlusCloseIcon,\nplusIcon: plusIcon,\npencilIcon: pencilIcon,\npencilOffIcon: pencilOffIcon,\ntrashIcon: trashIcon,\nhistoryBackIcon: historyBackIcon,\nhistoryForwardIcon: historyForwardIcon,\npersonIcon: personIcon,\nminiTreeIcon: miniTreeIcon,\ntoggleIconOn: toggleIconOn,\ntoggleIconOff: toggleIconOff,\nuserSvgIcon: userSvgIcon,\nuserEditSvgIcon: userEditSvgIcon,\nuserPlusSvgIcon: userPlusSvgIcon,\nuserPlusCloseSvgIcon: userPlusCloseSvgIcon,\nplusSvgIcon: plusSvgIcon,\npencilSvgIcon: pencilSvgIcon,\npencilOffSvgIcon: pencilOffSvgIcon,\ntrashSvgIcon: trashSvgIcon,\nhistoryBackSvgIcon: historyBackSvgIcon,\nhistoryForwardSvgIcon: historyForwardSvgIcon,\npersonSvgIcon: personSvgIcon,\nminiTreeSvgIcon: miniTreeSvgIcon,\ntoggleSvgIconOn: toggleSvgIconOn,\ntoggleSvgIconOff: toggleSvgIconOff\n});\n\nfunction formInfoSetup(form_creator, closeCallback) {\n  const formContainer = document.createElement('div');\n  update();\n  return formContainer\n\n  function update() {\n    const formHtml = getHtml(form_creator);\n\n    formContainer.innerHTML = formHtml;\n  \n    setupEventListeners();\n\n    return formContainer\n  }\n\n  function setupEventListeners() {\n    const form = formContainer.querySelector('form');\n    form.addEventListener('submit', form_creator.onSubmit);\n\n    const cancel_btn = form.querySelector('.f3-cancel-btn');\n    cancel_btn.addEventListener('click', onCancel);\n\n    const edit_btn = form.querySelector('.f3-edit-btn');\n    if (edit_btn) edit_btn.addEventListener('click', onEdit);\n\n    const delete_btn = form.querySelector('.f3-delete-btn');\n    if (delete_btn && form_creator.onDelete) {\n      delete_btn.addEventListener('click', form_creator.onDelete);\n    }\n\n    const add_relative_btn = form.querySelector('.f3-add-relative-btn');\n    if (add_relative_btn && form_creator.addRelative) {\n      add_relative_btn.addEventListener('click', () => {\n        if (form_creator.addRelativeActive) form_creator.addRelativeCancel();\n        else form_creator.addRelative();\n        form_creator.addRelativeActive = !form_creator.addRelativeActive;\n        update();\n      });\n    }\n\n    const close_btn = form.querySelector('.f3-close-btn');\n    close_btn.addEventListener('click', closeCallback);\n\n    const link_existing_relative_select = form.querySelector('.f3-link-existing-relative select');\n    if (link_existing_relative_select) {\n      link_existing_relative_select.addEventListener('change', form_creator.linkExistingRelative.onSelect);\n    }\n\n    function onCancel() {\n      form_creator.editable = false;\n      if (form_creator.onCancel) form_creator.onCancel();\n      update();\n    }\n\n    function onEdit() {\n      form_creator.editable = !form_creator.editable;\n      update();\n    }\n  }\n}\n\n function getHtml(form_creator) {\n  return (` \n    <form id=\"familyForm\" class=\"f3-form ${form_creator.editable ? '' : 'non-editable'}\">\n      ${closeBtn()}\n      ${form_creator.title ? `<h3 class=\"f3-form-title\">${form_creator.title}</h3>` : ''}\n      <div style=\"text-align: right; display: ${form_creator.new_rel ? 'none' : 'block'}\">\n        ${form_creator.addRelative && !form_creator.no_edit ? addRelativeBtn() : ''}\n        ${form_creator.no_edit ? spaceDiv() : editBtn()}\n      </div>\n      ${genderRadio()}\n\n      ${fields()}\n\n      ${form_creator.onDelete ? deleteBtn() : ''}\n\n      ${form_creator.linkExistingRelative ? addLinkExistingRelative() : ''}\n      \n      <div class=\"f3-form-buttons\">\n        <button type=\"button\" class=\"f3-cancel-btn\">Cancel</button>\n        <button type=\"submit\">Submit</button>\n      </div>\n    </form>\n  `)\n\n  function deleteBtn() {\n    return (`\n      <div>\n        <button type=\"button\" class=\"f3-delete-btn\" ${form_creator.can_delete ? '' : 'disabled'}>\n          Delete\n        </button>\n      </div>\n    `)\n  }\n\n  function addRelativeBtn() {\n    return (`\n      <span class=\"f3-add-relative-btn\">\n        ${form_creator.addRelativeActive ? userPlusCloseSvgIcon() : userPlusSvgIcon()}\n      </span>\n    `)\n  }\n\n  function editBtn() {\n    return (`\n      <span class=\"f3-edit-btn\">\n        ${form_creator.editable ? pencilOffSvgIcon() : pencilSvgIcon()}\n      </span>\n    `)\n  }\n\n  function genderRadio() {\n    if (!form_creator.editable) return ''\n    return (`\n      <div class=\"f3-radio-group\">\n        ${form_creator.gender_field.options.map(option => (`\n          <label>\n            <input type=\"radio\" name=\"${form_creator.gender_field.id}\" \n              value=\"${option.value}\" \n              ${option.value === form_creator.gender_field.initial_value ? 'checked' : ''}\n              ${form_creator.gender_field.disabled ? 'disabled' : ''}\n            >\n            ${option.label}\n          </label>\n        `)).join('')}\n      </div>\n    `)\n  }\n\n  function fields() {\n    if (!form_creator.editable) return infoField()\n    let fields_html = '';\n    form_creator.fields.forEach(field => {\n      if (field.type === 'text') {\n        fields_html += `\n        <div class=\"f3-form-field\">\n          <label>${field.label}</label>\n          <input type=\"${field.type}\" \n            name=\"${field.id}\" \n            value=\"${field.initial_value || ''}\"\n            placeholder=\"${field.label}\">\n        </div>`;\n      } else if (field.type === 'textarea') {\n        fields_html += `\n        <div class=\"f3-form-field\">\n          <label>${field.label}</label>\n          <textarea name=\"${field.id}\" \n            placeholder=\"${field.label}\">${field.initial_value || ''}</textarea>\n        </div>`;\n      } else if (field.type === 'select') {\n        fields_html += `\n        <div class=\"f3-form-field\">\n          <label>${field.label}</label>\n          <select name=\"${field.id}\" value=\"${field.initial_value || ''}\">\n            <option value=\"\">${field.placeholder || `Select ${field.label}`}</option>\n            ${field.options.map(option => `<option ${option.value === field.initial_value ? 'selected' : ''} value=\"${option.value}\">${option.label}</option>`).join('')}\n          </select>\n        </div>`;\n      } else if (field.type === 'rel_reference') {\n        fields_html += `\n        <div class=\"f3-form-field\">\n          <label>${field.label} - <i>${field.rel_label}</i></label>\n          <input type=\"text\" \n            name=\"${field.id}\" \n            value=\"${field.initial_value || ''}\"\n            placeholder=\"${field.label}\">\n        </div>`;\n      }\n    });\n    return fields_html\n\n    function infoField() {\n      let fields_html = '';\n      form_creator.fields.forEach(field => {\n        if (field.type === 'rel_reference') {\n          if (!field.initial_value) return\n          fields_html += `\n          <div class=\"f3-info-field\">\n            <span class=\"f3-info-field-label\">${field.label} - <i>${field.rel_label}</i></span>\n            <span class=\"f3-info-field-value\">${field.initial_value || ''}</span>\n          </div>`;\n        } else if (field.type === 'select') {\n          if (!field.initial_value) return\n          fields_html += `\n          <div class=\"f3-info-field\">\n            <span class=\"f3-info-field-label\">${field.label}</span>\n            <span class=\"f3-info-field-value\">${field.options.find(option => option.value === field.initial_value)?.label || ''}</span>\n          </div>`;\n        } else {\n          fields_html += `\n          <div class=\"f3-info-field\">\n            <span class=\"f3-info-field-label\">${field.label}</span>\n            <span class=\"f3-info-field-value\">${field.initial_value || ''}</span>\n          </div>`;\n        }\n      });\n      return fields_html\n    }\n  }\n\n  function addLinkExistingRelative() {\n    return (`\n      <div class=\"f3-link-existing-relative\">\n        <label>${form_creator.linkExistingRelative.label}</label>\n        <select>\n          <option value=\"\">Select ${form_creator.linkExistingRelative.label}</option>\n          ${form_creator.linkExistingRelative.options.map(option => `<option value=\"${option.value}\">${option.label}</option>`).join('')}\n        </select>\n      </div>\n    `)\n  }\n  \n\n  function closeBtn() {\n    return (`\n      <span class=\"f3-close-btn\">\n        ×\n      </span>\n    `)\n  }\n\n  function spaceDiv() {\n    return `<div style=\"height: 24px;\"></div>`\n  }\n}\n\nfunction createHistory(store, getStoreDataCopy, onUpdate) {\n  let history = [];\n  let history_index = -1;\n  \n  return {\n    changed,\n    back,\n    forward,\n    canForward,\n    canBack\n  }\n\n  function changed() {\n    if (history_index < history.length - 1) history = history.slice(0, history_index);\n    const clean_data = getStoreDataCopy();\n    clean_data.main_id = store.getMainId();\n    history.push(clean_data);\n    history_index++;\n  }\n\n  function back() {\n    if (!canBack()) return\n    history_index--;\n    updateData(history[history_index]);\n  }\n\n  function forward() {\n    if (!canForward()) return\n    history_index++;\n    updateData(history[history_index]);\n  }\n\n  function canForward() {\n    return history_index < history.length - 1\n  }\n\n  function canBack() {\n    return history_index > 0\n  }\n\n  function updateData(data) {\n    store.updateMainId(data.main_id);\n    store.updateData(data);\n    onUpdate();\n  }\n}\n\nfunction createHistoryControls(cont, history, onUpdate=()=>{}) {\n  const history_controls = d3.select(cont).append(\"div\").attr(\"class\", \"f3-history-controls\");\n  const back_btn = history_controls.append(\"button\").attr(\"class\", \"f3-back-button\").on(\"click\", () => {\n    history.back();\n    updateButtons();\n    onUpdate();\n  });\n  const forward_btn = history_controls.append(\"button\").attr(\"class\", \"f3-forward-button\").on(\"click\", () => {\n    history.forward();\n    updateButtons();\n    onUpdate();\n  });\n\n  back_btn.html(historyBackSvgIcon());\n  forward_btn.html(historyForwardSvgIcon());\n\n  return {\n    back_btn: back_btn.node(),\n    forward_btn: forward_btn.node(),\n    updateButtons,\n    destroy\n  }\n\n  function updateButtons() {\n    back_btn.classed(\"disabled\", !history.canBack());\n    forward_btn.classed(\"disabled\", !history.canForward());\n    history_controls.style(\"display\", !history.canBack() && !history.canForward() ? \"none\" : null);\n  }\n\n  function destroy() {\n    history = null;\n    d3.select(cont).select('.f3-history-controls').remove();\n  }\n}\n\nvar handlers = /*#__PURE__*/Object.freeze({\n__proto__: null,\nmanualZoom: manualZoom,\nisAllRelativeDisplayed: isAllRelativeDisplayed,\ncardChangeMain: cardChangeMain,\ncardEdit: cardEdit,\ncardShowHideRels: cardShowHideRels,\nhandleRelsOfNewDatum: handleRelsOfNewDatum,\ncreateNewPerson: createNewPerson,\ncreateNewPersonWithGenderFromRel: createNewPersonWithGenderFromRel,\naddNewPerson: addNewPerson,\ncreateTreeDataWithMainNode: createTreeDataWithMainNode,\naddNewPersonAndHandleRels: addNewPersonAndHandleRels,\ncheckIfRelativesConnectedWithoutPerson: checkIfRelativesConnectedWithoutPerson,\ncreateForm: createForm,\nsyncRelReference: syncRelReference,\nonDeleteSyncRelReference: onDeleteSyncRelReference,\nmoveToAddToAdded: moveToAddToAdded,\nremoveToAdd: removeToAdd,\ndeletePerson: deletePerson,\ncleanupDataJson: cleanupDataJson,\nremoveToAddFromData: removeToAddFromData,\nformInfoSetup: formInfoSetup,\ncreateHistory: createHistory,\ncreateHistoryControls: createHistoryControls,\ntreeFit: treeFit,\ncalculateTreeFit: calculateTreeFit,\ncardToMiddle: cardToMiddle\n});\n\nfunction CardBody({d,card_dim,card_display}) {\n  return {template: (`\n    <g class=\"card-body\">\n      <rect width=\"${card_dim.w}\" height=\"${card_dim.h}\" class=\"card-body-rect\" />\n      ${CardText({d,card_dim,card_display}).template}\n    </g>\n  `)\n  }\n}\n\nfunction CardText({d,card_dim,card_display}) {\n  return {template: (`\n    <g>\n      <g class=\"card-text\" clip-path=\"url(#card_text_clip)\">\n        <g transform=\"translate(${card_dim.text_x}, ${card_dim.text_y})\">\n          <text>\n            ${Array.isArray(card_display) ? card_display.map(cd => `<tspan x=\"${0}\" dy=\"${14}\">${cd(d.data)}</tspan>`).join('\\n') : card_display(d.data)}\n          </text>\n        </g>\n      </g>\n      <rect width=\"${card_dim.w-10}\" height=\"${card_dim.h}\" style=\"mask: url(#fade)\" class=\"text-overflow-mask\" /> \n    </g>\n  `)\n  }\n}\n\nfunction CardBodyAddNew({d,card_dim,card_add,label}) {\n  return {template: (`\n    <g class=\"card-body ${card_add ? 'card_add' : 'card-unknown'}\">\n      <rect class=\"card-body-rect\" width=\"${card_dim.w}\" height=\"${card_dim.h}\" fill=\"rgb(59, 85, 96)\" />\n      <text transform=\"translate(${card_dim.w/2}, ${card_dim.h/2})\" text-anchor=\"middle\" fill=\"#fff\">\n        <tspan font-size=\"18\" dy=\"${8}\">${label}</tspan>\n      </text>\n    </g>\n  `)\n  }\n}\n\nfunction CardBodyAddNewRel({d,card_dim,label}) {\n  return {template: (`\n    <g class=\"card-body\">\n      <rect class=\"card-body-rect\" width=\"${card_dim.w}\" height=\"${card_dim.h}\" />\n      <text transform=\"translate(${card_dim.img_w+5}, ${card_dim.h/2})\">\n        <tspan font-size=\"18\" dy=\"${8}\" pointer-events=\"none\">${label}</tspan>\n      </text>\n    </g>\n  `)\n  }\n}\n\nfunction CardBodyOutline({d,card_dim, is_new}) {\n  return {template: (`\n    <rect width=\"${card_dim.w}\" height=\"${card_dim.h}\" rx=\"4\" ry=\"4\" class=\"card-outline ${(d.data.main && !is_new) ? 'card-main-outline' : ''} ${is_new ? 'card-new-outline' : ''}\" />\n  `)\n  }\n}\n\nfunction PencilIcon({d,card_dim,x,y}) {\n  return ({template: (`\n    <g transform=\"translate(${x || card_dim.w-20},${y || card_dim.h-20})scale(.6)\" style=\"cursor: pointer\" class=\"card_edit pencil_icon\">\n      <circle fill=\"rgba(0,0,0,0)\" r=\"17\" cx=\"8.5\" cy=\"8.5\" />\n      <path fill=\"currentColor\" transform=\"translate(-1.5, -1.5)\"\n         d=\"M19.082,2.123L17.749,0.79c-1.052-1.052-2.766-1.054-3.819,0L1.925,12.794c-0.06,0.06-0.104,0.135-0.127,0.216\n          l-1.778,6.224c-0.05,0.175-0.001,0.363,0.127,0.491c0.095,0.095,0.223,0.146,0.354,0.146c0.046,0,0.092-0.006,0.137-0.02\n          l6.224-1.778c0.082-0.023,0.156-0.066,0.216-0.127L19.082,5.942C20.134,4.89,20.134,3.176,19.082,2.123z M3.076,13.057l9.428-9.428\n          l3.738,3.739l-9.428,9.428L3.076,13.057z M2.566,13.961l3.345,3.344l-4.683,1.339L2.566,13.961z M18.375,5.235L16.95,6.66\n          l-3.738-3.739l1.425-1.425c0.664-0.663,1.741-0.664,2.405,0l1.333,1.333C19.038,3.493,19.038,4.572,18.375,5.235z\"/>\n    </g>\n  `)})\n}\n\nfunction MiniTree({d,card_dim}) {\n  return ({template: (`\n    <g class=\"card_family_tree\" style=\"cursor: pointer\">\n      <rect x=\"-31\" y=\"-25\" width=\"72\" height=\"15\" fill=\"rgba(0,0,0,0)\"></rect>\n      <g transform=\"translate(${card_dim.w*.8},6)scale(.9)\">\n        <rect x=\"-31\" y=\"-25\" width=\"72\" height=\"15\" fill=\"rgba(0,0,0,0)\"></rect>\n        <line y2=\"-17.5\" stroke=\"#fff\" />\n        <line x1=\"-20\" x2=\"20\" y1=\"-17.5\" y2=\"-17.5\" stroke=\"#fff\" />\n        <rect x=\"-31\" y=\"-25\" width=\"25\" height=\"15\" rx=\"5\" ry=\"5\" class=\"card-male\" />\n        <rect x=\"6\" y=\"-25\" width=\"25\" height=\"15\" rx=\"5\" ry=\"5\" class=\"card-female\" />\n      </g>\n    </g>\n  `)})\n}\n\nfunction PlusIcon({d,card_dim,x,y}) {\n  return ({template: (`\n    <g class=\"card_add_relative\">\n      <g transform=\"translate(${x || card_dim.w/2},${y || card_dim.h})scale(.13)\">\n        <circle r=\"80\" cx=\"40\" cy=\"40\" fill=\"rgba(0,0,0,0)\" />\n        <g transform=\"translate(-10, -8)\">\n          <line\n            x1=\"10\" x2=\"90\" y1=\"50\" y2=\"50\"\n            stroke=\"currentColor\" stroke-width=\"15\" stroke-linecap=\"round\"\n          />\n          <line\n            x1=\"50\" x2=\"50\" y1=\"10\" y2=\"90\"\n            stroke=\"currentColor\" stroke-width=\"15\" stroke-linecap=\"round\"\n          />\n        </g>\n      </g>\n    </g>\n  `)})\n}\n\nfunction LinkBreakIcon({x,y,rt,closed}) {\n  return ({template: (`\n    <g style=\"\n          transform: translate(-12.2px, -.5px);\n          cursor: pointer;\n        \" \n        fill=\"currentColor\" class=\"card_break_link${closed ? ' closed' : ''}\"\n      >\n      <g style=\"transform: translate(${x}px,${y}px)scale(.02)rotate(${rt+'deg'})\">\n        <rect width=\"1000\" height=\"700\" y=\"150\" style=\"opacity: 0\" />\n        <g class=\"link_upper\">\n          <g>\n            <path d=\"M616.3,426.4c19,4.5,38.1-7.4,42.6-26.4c4.4-19-7.4-38-26.5-42.5L522.5,332c-18,11.1-53.9,33.4-53.9,33.4l80.4,18.6c-7.8,4.9-19.5,12.1-31.3,19.4L616.3,426.4L616.3,426.4z\"/>\n            <path d=\"M727.4,244.2c-50.2-11.6-100.3,3.3-135.7,35.4c28.6,22.6,64.5,30.2,116.4,51.3l141,32.6c23.9,5.6,56.6,47.2,51.1,71l-4.1,17c-5.6,23.7-47.3,56.4-71.2,51l-143.4-33.2c-66.8-8.6-104.1-16.6-132.9-7.5c17.4,44.9,55.9,80.8,106.5,92.4L800.9,588c81.3,18.8,162.3-31.5,181.2-112.4l4-17c18.8-81.1-31.7-161.8-112.9-180.6L727.4,244.2z\"/>\n          </g>\n        </g>\n        <g class=\"link_lower\">\n          <path d=\"M421.2,384.9l-128,127.6c-13.9,13.8-13.9,36.2,0,50s36.3,13.8,50.2,0.1l136.2-135.8v-36.7l-58.4,58.1V384.9L421.2,384.9z\"/>\n          <path d=\"M204.6,742.8c-17.4,17.3-63.3,17.2-80.6,0.1l-12.3-12.3c-17.3-17.3,0.6-81.2,17.9-98.5l100.2-99.9c12.5-14.9,45.8-40.8,66.1-103.7c-47.7-9.4-98.9,4.2-135.8,40.9L54.2,575c-58.9,58.8-58.9,154,0,212.8L66.6,800c58.9,58.8,154.5,58.8,213.4,0l105.8-105.6c38.4-38.3,51.3-91.9,39.7-141c-44,22.7-89,62.3-116,84.8L204.6,742.8z\"/>\n        </g>\n        <g class=\"link_particles\">\n          <path d=\"M351.9,248.4l-26.5,63.4l80.6,30.1L351.9,248.4z\"/>\n          <path d=\"M529.3,208l-43,26.6l35.4,52.3L529.3,208z\"/>\n          <path d=\"M426.6,158.8l-44-2.9l61.7,134.6L426.6,158.8z\"/>\n        </g>\n      </g>\n    </g>\n  `)})\n}\n\nfunction LinkBreakIconWrapper({d,card_dim}) {\n  let g = \"\",\n    r = d.data.rels, _r = d.data._rels || {},\n    closed = d.data.hide_rels,\n    areParents = r => r.father || r.mother,\n    areChildren = r => r.children && r.children.length > 0;\n  if ((d.is_ancestry || d.data.main) && (areParents(r) || areParents(_r))) {g+=LinkBreakIcon({x:card_dim.w/2,y:0, rt: -45, closed}).template;}\n  if (!d.is_ancestry && d.added) {\n    const sp = d.spouse, sp_r = sp.data.rels, _sp_r = sp.data._rels || {};\n    if ((areChildren(r) || areChildren(_r)) && (areChildren(sp_r) || areChildren(_sp_r))) {\n      g+=LinkBreakIcon({x:d.sx - d.x + card_dim.w/2 +24.4,y: (d.x !== d.sx ? card_dim.h/2 : card_dim.h)+1, rt: 135, closed}).template;\n    }\n  }\n  return {template: g}\n}\n\nfunction CardImage({d, image, card_dim, maleIcon, femaleIcon}) {\n  return ({template: (`\n    <g style=\"transform: translate(${card_dim.img_x}px,${card_dim.img_y}px);\" class=\"card_image\" clip-path=\"url(#card_image_clip)\">\n      ${image \n        ? `<image href=\"${image}\" height=\"${card_dim.img_h}\" width=\"${card_dim.img_w}\" preserveAspectRatio=\"xMidYMin slice\" />`\n        : (d.data.data.gender === \"F\" && !!femaleIcon) ? femaleIcon({card_dim}) \n        : (d.data.data.gender === \"M\" && !!maleIcon) ? maleIcon({card_dim}) \n        : GenderlessIcon()\n      }      \n    </g>\n  `)})\n\n  function GenderlessIcon() {\n    return (`\n      <g class=\"genderless-icon\">\n        <rect height=\"${card_dim.img_h}\" width=\"${card_dim.img_w}\" fill=\"rgb(59, 85, 96)\" />\n        <g transform=\"scale(${card_dim.img_w*0.001616})\">\n         <path transform=\"translate(50,40)\" fill=\"lightgrey\" d=\"M256 288c79.5 0 144-64.5 144-144S335.5 0 256 0 112 \n            64.5 112 144s64.5 144 144 144zm128 32h-55.1c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16H128C57.3 320 0 377.3 \n            0 448v16c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48v-16c0-70.7-57.3-128-128-128z\" />\n        </g>\n      </g>\n    `)\n  }\n}\n\nfunction appendTemplate(template, parent, is_first) {\n  const g = document.createElementNS(\"http://www.w3.org/2000/svg\", 'g');\n  g.innerHTML = template;\n\n  if (is_first) parent.insertBefore(g, parent.firstChild);\n  else parent.appendChild(g);\n}\n\nconst CardElements = {\n  miniTree,\n  lineBreak,\n  cardBody,\n  cardImage,\n  cardEdit: cardEditIcon,\n  cardAdd: cardAddIcon,\n};\n\nfunction miniTree(d, props) {\n  if (d.data.to_add) return\n  const card_dim = props.card_dim;\n  if (d.all_rels_displayed) return\n  const g = d3.create('svg:g').html(MiniTree({d,card_dim}).template);\n  g.on(\"click\", function (e) {\n    e.stopPropagation();\n    if (props.onMiniTreeClick) props.onMiniTreeClick.call(this, e, d);\n    else cardChangeMain(props.store, {d});\n  });\n  return g.node()\n}\n\nfunction lineBreak(d, props) {\n  if (d.data.to_add) return\n  const card_dim = props.card_dim;\n  const g = d3.create('svg:g').html(LinkBreakIconWrapper({d,card_dim}).template);\n  g.on(\"click\", (e) => {e.stopPropagation();cardShowHideRels(props.store, {d});});\n  return g.node()\n}\n\nfunction cardBody(d, props) {\n  const unknown_lbl = props.cardEditForm ? 'ADD' : 'UNKNOWN';\n  const card_dim = props.card_dim;\n\n  let g;\n  if (!d.data.to_add) {\n    g = d3.create('svg:g').html(CardBody({d, card_dim, card_display: props.card_display}).template);\n    g.on(\"click\", function (e) {\n      e.stopPropagation();\n      if (props.onCardClick) props.onCardClick.call(this, e, d);\n      else cardChangeMain(props.store, {d});\n    });\n  } else {\n    g = d3.create('svg:g').html(CardBodyAddNew({d, card_dim, card_add: props.cardEditForm, label: unknown_lbl}).template);\n    g.on(\"click\", (e) => {e.stopPropagation();cardEdit(props.store, {d, cardEditForm: props.cardEditForm});});\n  }\n  return g.node()\n}\n\nfunction cardImage(d, props) {\n  if (d.data.to_add) return\n  const card_dim = props.card_dim;\n  const g = d3.create('svg:g').html(CardImage({d, image: d.data.data.avatar || null, card_dim, maleIcon: null, femaleIcon: null}).template);\n  return g.node()\n}\n\nfunction cardEditIcon(d, props) {\n  if (d.data.to_add) return\n  const card_dim = props.card_dim;\n  const g = d3.create('svg:g').html(PencilIcon({card_dim, x: card_dim.w-46, y: card_dim.h-20}).template);\n  g.on(\"click\", (e) => {e.stopPropagation();cardEdit(props.store, {d, cardEditForm: props.cardEditForm});});\n\n  return g.node()\n}\n\nfunction cardAddIcon(d, props) {\n  if (d.data.to_add) return\n  const card_dim = props.card_dim;\n  const g = d3.create('svg:g').html(PlusIcon({card_dim, x: card_dim.w-26, y: card_dim.h-20}).template);\n  g.on(\"click\", (e) => {e.stopPropagation();props.addRelative({d});});\n\n  return g.node()\n}\n\n\nfunction appendElement(el_maybe, parent, is_first) {\n  if (!el_maybe) return\n  if (is_first) parent.insertBefore(el_maybe, parent.firstChild);\n  else parent.appendChild(el_maybe);\n}\n\nfunction setupCardSvgDefs(svg, card_dim) {\n  if (svg.querySelector(\"defs#f3CardDef\")) return\n  svg.insertAdjacentHTML('afterbegin', (`\n      <defs id=\"f3CardDef\">\n        <linearGradient id=\"fadeGrad\">\n          <stop offset=\"0.9\" stop-color=\"white\" stop-opacity=\"0\"/>\n          <stop offset=\".91\" stop-color=\"white\" stop-opacity=\".5\"/>\n          <stop offset=\"1\" stop-color=\"white\" stop-opacity=\"1\"/>\n        </linearGradient>\n        <mask id=\"fade\" maskContentUnits=\"objectBoundingBox\"><rect width=\"1\" height=\"1\" fill=\"url(#fadeGrad)\"/></mask>\n        <clipPath id=\"card_clip\"><path d=\"${curvedRectPath({w:card_dim.w, h:card_dim.h}, 5)}\"></clipPath>\n        <clipPath id=\"card_text_clip\"><rect width=\"${card_dim.w-10}\" height=\"${card_dim.h}\"></rect></clipPath>\n        <clipPath id=\"card_image_clip\"><path d=\"M0,0 Q 0,0 0,0 H${card_dim.img_w} V${card_dim.img_h} H0 Q 0,${card_dim.img_h} 0,${card_dim.img_h} z\"></clipPath>\n        <clipPath id=\"card_image_clip_curved\"><path d=\"${curvedRectPath({w: card_dim.img_w, h:card_dim.img_h}, 5, ['rx', 'ry'])}\"></clipPath>\n      </defs>\n    `));\n\n  function curvedRectPath(dim, curve, no_curve_corners) {\n    const {w,h} = dim,\n      c = curve,\n      ncc = no_curve_corners || [],\n      ncc_check = (corner) => ncc.includes(corner),\n      lx = ncc_check('lx') ? `M0,0` : `M0,${c} Q 0,0 5,0`,\n      rx = ncc_check('rx') ? `H${w}` : `H${w-c} Q ${w},0 ${w},5`,\n      ry = ncc_check('ry') ? `V${h}` : `V${h-c} Q ${w},${h} ${w-c},${h}`,\n      ly = ncc_check('ly') ? `H0` : `H${c} Q 0,${h} 0,${h-c}`;\n\n    return (`${lx} ${rx} ${ry} ${ly} z`)\n  }\n}\n\nfunction updateCardSvgDefs(svg, card_dim) {\n  if (svg.querySelector(\"defs#f3CardDef\")) {\n    svg.querySelector(\"defs#f3CardDef\").remove();\n  }\n  setupCardSvgDefs(svg, card_dim);\n}\n\nfunction Card(props) {\n  props = setupProps(props);\n  setupCardSvgDefs(props.svg, props.card_dim);\n\n  return function (d) {\n    const gender_class = d.data.data.gender === 'M' ? 'card-male' : d.data.data.gender === 'F' ? 'card-female' : 'card-genderless';\n    const card_dim = props.card_dim;\n\n    const card = d3.create('svg:g').attr('class', `card ${gender_class}`).attr('transform', `translate(${[-card_dim.w / 2, -card_dim.h / 2]})`);\n    card.append('g').attr('class', 'card-inner').attr('clip-path', 'url(#card_clip)');\n\n    this.innerHTML = '';\n    this.appendChild(card.node());\n\n    appendTemplate(CardBodyOutline({d,card_dim,is_new:d.data.to_add}).template, card.node(), true);\n    appendElement(CardElements.cardBody(d, props), this.querySelector('.card-inner'));\n\n    if (props.img) appendElement(CardElements.cardImage(d, props), this.querySelector('.card'));\n    if (props.mini_tree) appendElement(CardElements.miniTree(d, props), this.querySelector('.card'), true);\n    if (props.link_break) appendElement(CardElements.lineBreak(d, props), this.querySelector('.card'));\n\n    if (props.cardEditForm) {\n      appendElement(CardElements.cardEdit(d, props), this.querySelector('.card-inner'));\n      appendElement(CardElements.cardAdd(d, props), this.querySelector('.card-inner'));\n    }\n\n    if (props.onCardUpdates) props.onCardUpdates.map(fn => fn.call(this, d));\n    if (props.onCardUpdate) props.onCardUpdate.call(this, d);\n  }\n\n  function setupProps(props) {\n    const default_props = {\n      img: true,\n      mini_tree: true,\n      link_break: false,\n      card_dim: {w:220,h:70,text_x:75,text_y:15,img_w:60,img_h:60,img_x:5,img_y:5}\n    };\n    if (!props) props = {};\n    for (const k in default_props) {\n      if (typeof props[k] === 'undefined') props[k] = default_props[k];\n    }\n    return props\n  }\n}\n\nfunction handleCardDuplicateToggle(node, d, is_horizontal, updateTree) {\n  if (!d.hasOwnProperty('_toggle')) return\n\n  const card = node.querySelector('.card-inner');\n  const card_width = node.querySelector('.card').offsetWidth;\n  let toggle_is_off;\n  let toggle_id;\n  const pos = {};\n  if (d.spouse) {\n    const spouse = d.spouse;\n    const parent_id = spouse.data.main ? 'main' : spouse.parent.data.id;\n    toggle_is_off = spouse.data._tgdp_sp[parent_id][d.data.id] < 0;\n    pos.top = 60;\n    pos.left = d.sx-d.x-30+card_width/2;\n    if (is_horizontal) {\n      pos.top = d.sy - d.x + 4;\n      pos.left = 105;\n    }\n    toggle_id = spouse._toggle_id_sp ? spouse._toggle_id_sp[d.data.id] : -1;\n    if (toggle_id === -1) return\n  } else {\n    const parent_id = d.data.main ? 'main' : d.parent.data.id;\n    toggle_is_off = d.data._tgdp[parent_id] < 0;\n    pos.top = -65;\n    pos.left = -30+card_width/2;\n    if (is_horizontal) {\n      pos.top = 5;\n      pos.left = -55;\n    }\n    toggle_id = d._toggle_id;\n  }\n\n\n  const toggle_div = d3.select(card)\n  .append('div')\n  .attr('class', 'f3-toggle-div')\n  .attr('style', 'cursor: pointer; width: 60px; height: 60px;position: absolute;')\n  .style('top', pos.top+'px')\n  .style('left', pos.left+'px');\n\n  toggle_div\n  .append('div')\n  .html(toggle_is_off ? toggleSvgIconOff() : toggleSvgIconOn())\n  .select('svg')\n  .classed('f3-toggle-icon', true)\n  .style('color', toggle_is_off ? '#585656' : '#61bf52')\n  .style('padding', '0')\n  .on('click', (e) => {\n    e.stopPropagation();\n    if (d.spouse) {\n      const spouse = d.spouse;\n      const parent_id = spouse.data.main ? 'main' : spouse.parent.data.id;\n      if (!spouse.data._tgdp_sp[parent_id].hasOwnProperty(d.data.id)) console.error('no toggle', d, spouse);\n      let val = spouse.data._tgdp_sp[parent_id][d.data.id];\n      if (val < 0) val = new Date().getTime();\n      else val = -new Date().getTime();\n      spouse.data._tgdp_sp[parent_id][d.data.id] = val;\n    } else {\n      const parent_id = d.data.main ? 'main' : d.parent.data.id;\n      let val = d.data._tgdp[parent_id];\n      if (val < 0) val = new Date().getTime();\n      else val = -new Date().getTime();\n      d.data._tgdp[parent_id] = val;\n    }\n\n    updateTree();\n  });\n\n  d3.select(card)\n  .select('.f3-toggle-icon .f3-small-circle')\n  .style('fill', '#fff');\n\n  d3.select(card)\n  .select('.f3-toggle-icon')\n  .append('text')\n  .attr('transform', toggle_is_off ? 'translate(10.6, 14.5)' : 'translate(4.1, 14.5)')\n  .attr('fill', toggle_is_off ? '#fff' : '#fff')\n  .attr('font-size', '7px')\n  .text('C'+toggle_id);\n\n\n  if (toggle_is_off) {\n    let transform;\n    if (d.is_ancestry) {\n      if (is_horizontal) transform = 'translate(5, -30)rotate(-90)';\n      else transform = 'translate(0, -10)';\n    } else {\n      if (is_horizontal) transform = 'translate(11, -22)rotate(90)';\n      else transform = 'translate(-7, -32)rotate(180)';\n    }\n    d3.select(card)\n    .select('.f3-toggle-div')\n    .insert('div')\n    .html(miniTreeSvgIcon())\n    .select('svg')\n    .attr('style', 'position: absolute; z-index: -1;top: 0;left: 0;border-radius: 0;')\n    .style('width', '66px')\n    .style('height', '112px')\n    .attr('transform', transform)\n    .attr('viewBox', '0 0 72 125')\n    .select('line')\n    .attr('y1', d.is_ancestry ? '62' : '100');\n  } \n}\n\nfunction CardHtml(props) {\n  const cardInner = props.style === 'default' ? cardInnerDefault \n  : props.style === 'imageCircleRect' ? cardInnerImageCircleRect\n  : props.style === 'imageCircle' ? cardInnerImageCircle \n  : props.style === 'imageRect' ? cardInnerImageRect\n  : props.style === 'rect' ? cardInnerRect\n  : cardInnerDefault;\n\n  return function (d) {\n    this.innerHTML = (`\n    <div class=\"card ${getClassList(d).join(' ')}\" data-id=\"${d.tid}\" style=\"transform: translate(-50%, -50%); pointer-events: auto;\">\n      ${props.mini_tree ? getMiniTree(d) : ''}\n      ${(props.cardInnerHtmlCreator && !d.data._new_rel_data) ? props.cardInnerHtmlCreator(d) : cardInner(d)}\n    </div>\n    `);\n    this.querySelector('.card').addEventListener('click', e => props.onCardClick(e, d));\n    if (props.onCardUpdate) props.onCardUpdate.call(this, d);\n\n    if (props.onCardMouseenter) d3.select(this).select('.card').on('mouseenter', e => props.onCardMouseenter(e, d));\n    if (props.onCardMouseleave) d3.select(this).select('.card').on('mouseleave', e => props.onCardMouseleave(e, d));\n    if (d.duplicate) handleCardDuplicateHover(this, d);\n    if (props.duplicate_branch_toggle) handleCardDuplicateToggle(this, d, props.store.state.is_horizontal, props.store.updateTree);\n    if (location.origin.includes('localhost')) {\n      d.__node = this.querySelector('.card');\n      d.__label = d.data.data['first name'];\n    }\n  }\n\n  function getCardInnerImageCircle(d) {\n    return (`\n    <div class=\"card-inner card-image-circle\" ${getCardStyle()}>\n      ${d.data.data[props.cardImageField] ? `<img src=\"${d.data.data[props.cardImageField]}\" ${getCardImageStyle()}>` : noImageIcon(d)}\n      <div class=\"card-label\">${textDisplay(d)}</div>\n      ${d.duplicate ? getCardDuplicateTag(d) : ''}\n    </div>\n    `)\n  }\n\n  function getCardInnerImageRect(d) {\n    return (`\n    <div class=\"card-inner card-image-rect\" ${getCardStyle()}>\n      ${d.data.data[props.cardImageField] ? `<img src=\"${d.data.data[props.cardImageField]}\" ${getCardImageStyle()}>` : noImageIcon(d)}\n      <div class=\"card-label\">${textDisplay(d)}</div>\n      ${d.duplicate ? getCardDuplicateTag(d) : ''}\n    </div>\n    `)\n  }\n\n  function getCardInnerRect(d) {\n    return (`\n    <div class=\"card-inner card-rect\" ${getCardStyle()}>\n      ${textDisplay(d)}\n      ${d.duplicate ? getCardDuplicateTag(d) : ''}\n    </div>\n    `)\n  }\n\n  function textDisplay(d) {\n    if (d.data._new_rel_data) return newRelDataDisplay(d)\n    if (d.data.to_add) return `<div>${props.empty_card_label || 'ADD'}</div>`\n    return (`\n      ${props.card_display.map(display => `<div>${display(d.data)}</div>`).join('')}\n    `)\n  }\n\n  function newRelDataDisplay(d) {\n    const attr_list = [];\n    attr_list.push(`data-rel-type=\"${d.data._new_rel_data.rel_type}\"`);\n    if (['son', 'daughter'].includes(d.data._new_rel_data.rel_type)) attr_list.push(`data-other-parent-id=\"${d.data._new_rel_data.other_parent_id}\"`);\n    return `<div ${attr_list.join(' ')}>${d.data._new_rel_data.label}</div>`\n  }\n\n  function getMiniTree(d) {\n    if (!props.mini_tree) return ''\n    if (d.data.to_add) return ''\n    if (d.data._new_rel_data) return ''\n    if (d.all_rels_displayed) return ''\n    return `<div class=\"mini-tree\">${miniTreeSvgIcon()}</div>`\n  }\n\n  function cardInnerImageCircleRect(d) {\n    return d.data.data[props.cardImageField] ? cardInnerImageCircle(d) : cardInnerRect(d)\n  }\n\n  function cardInnerDefault(d) {\n    return getCardInnerImageRect(d)\n  }\n\n  function cardInnerImageCircle(d) {\n    return getCardInnerImageCircle(d)\n  }\n\n  function cardInnerImageRect(d) {\n    return getCardInnerImageRect(d)\n  }\n\n  function cardInnerRect(d) {\n    return getCardInnerRect(d)\n  }\n\n  function getClassList(d) {\n    const class_list = [];\n    if (d.data.data.gender === 'M') class_list.push('card-male');\n    else if (d.data.data.gender === 'F') class_list.push('card-female');\n    else class_list.push('card-genderless');\n\n    if (d.data.main) class_list.push('card-main');\n\n    if (d.data._new_rel_data) class_list.push('card-new-rel');\n\n    if (d.data.to_add) class_list.push('card-to-add');\n\n    return class_list\n  }\n\n  function getCardStyle() {\n    let style = 'style=\"';\n    if (props.card_dim.w || props.card_dim.h) {\n      style += `width: ${props.card_dim.w}px; min-height: ${props.card_dim.h}px;`;\n      if (props.card_dim.height_auto) style += 'height: auto;';\n      else style += `height: ${props.card_dim.h}px;`;\n    } else {\n      return ''\n    }\n    style += '\"';\n    return style\n  }\n\n  function getCardImageStyle() {\n    let style = 'style=\"position: relative;';\n    if (props.card_dim.img_w || props.card_dim.img_h || props.card_dim.img_x || props.card_dim.img_y) {\n      style += `width: ${props.card_dim.img_w}px; height: ${props.card_dim.img_h}px;`;\n      style += `left: ${props.card_dim.img_x}px; top: ${props.card_dim.img_y}px;`;\n    } else {\n      return ''\n    }\n    style += '\"';\n    return style\n  }\n\n  function noImageIcon(d) {\n    if (d.data._new_rel_data) return `<div class=\"person-icon\" ${getCardImageStyle()}>${plusSvgIcon()}</div>`\n    return `<div class=\"person-icon\" ${getCardImageStyle()}>${props.defaultPersonIcon ? props.defaultPersonIcon(d) : personSvgIcon()}</div>`\n  }\n\n  function getCardDuplicateTag(d) {\n    return `<div class=\"f3-card-duplicate-tag\">x${d.duplicate}</div>`\n  }\n\n  function handleCardDuplicateHover(node, d) {\n    d3.select(node).on('mouseenter', e => {\n      d3.select(node.closest('.cards_view')).selectAll('.card_cont').select('.card').classed('f3-card-duplicate-hover', d0 => d0.data.id === d.data.id);\n    });\n    d3.select(node).on('mouseleave', e => {\n      d3.select(node.closest('.cards_view')).selectAll('.card_cont').select('.card').classed('f3-card-duplicate-hover', false);\n    });\n  }\n}\n\nfunction CardSvg(props) {\n  props = setupProps(props);\n  setupCardSvgDefs(props.svg, props.card_dim);\n\n  return function (d) {\n    const gender_class = d.data.data.gender === 'M' ? 'card-male' : d.data.data.gender === 'F' ? 'card-female' : 'card-genderless';\n    const card_dim = props.card_dim;\n\n    const card = d3.create('svg:g').attr('class', `card ${gender_class}`).attr('transform', `translate(${[-card_dim.w / 2, -card_dim.h / 2]})`);\n    card.append('g').attr('class', 'card-inner').attr('clip-path', 'url(#card_clip)');\n\n    this.innerHTML = '';\n    this.appendChild(card.node());\n\n    card.on(\"click\", function (e) {\n      e.stopPropagation();\n      props.onCardClick.call(this, e, d);\n    });\n\n    if (d.data._new_rel_data) {\n      appendTemplate(CardBodyOutline({d,card_dim,is_new:d.data.to_add}).template, card.node(), true);\n      appendTemplate(CardBodyAddNewRel({d,card_dim,label: d.data._new_rel_data.label}).template, this.querySelector('.card-inner'), true);\n      d3.select(this.querySelector('.card-inner'))\n      .append('g')\n      .attr('class', 'card-edit-icon')\n      .attr('fill', 'currentColor')\n      .attr('transform', `translate(-1,2)scale(${card_dim.img_h/22})`)\n      .html(plusIcon());\n    } else {\n      appendTemplate(CardBodyOutline({d,card_dim,is_new:d.data.to_add}).template, card.node(), true);\n      appendTemplate(CardBody({d,card_dim,card_display: props.card_display}).template, this.querySelector('.card-inner'));\n\n      if (props.img) appendElement(CardElements.cardImage(d, props), this.querySelector('.card'));\n      if (props.mini_tree) appendElement(CardElements.miniTree(d, props), this.querySelector('.card'), true);\n      if (props.link_break) appendElement(CardElements.lineBreak(d, props), this.querySelector('.card'));\n    }\n\n    if (props.onCardUpdate) props.onCardUpdate.call(this, d);\n  }\n\n  function setupProps(props) {\n    const default_props = {\n      img: true,\n      mini_tree: true,\n      link_break: false,\n      card_dim: {w:220,h:70,text_x:75,text_y:15,img_w:60,img_h:60,img_x:5,img_y:5}\n    };\n    if (!props) props = {};\n    for (const k in default_props) {\n      if (typeof props[k] === 'undefined') props[k] = default_props[k];\n    }\n    return props\n  }\n}\n\nvar elements = /*#__PURE__*/Object.freeze({\n__proto__: null,\nappendElement: appendElement,\nCard: Card,\nCardHtml: CardHtml,\nCardSvg: CardSvg\n});\n\nvar addRelative = (...args) => { return new AddRelative(...args) };\n\nfunction AddRelative(store, cancelCallback) {\n  this.store = store;\n\n  this.cancelCallback = cancelCallback;\n\n  this.datum = null;\n\n  this.onChange = null;\n  this.onCancel = null;\n\n  this.is_active = false;\n\n  this.addRelLabels = this.addRelLabelsDefault();\n\n  return this\n}\n\nAddRelative.prototype.activate = function(datum) {\n  if (this.is_active) this.onCancel();\n  this.is_active = true;\n\n  const store = this.store;\n\n  this.datum = datum;\n  let gender_stash = this.datum.data.gender;\n\n  addDatumRelsPlaceholders(datum, this.getStoreData(), this.addRelLabels);\n  store.updateTree({});\n\n  this.onChange = onChange.bind(this);\n  this.onCancel = onCancel.bind(this);\n\n  function onChange(updated_datum, props) {\n    if (updated_datum?._new_rel_data) {\n      if (props?.link_rel_id) handleLinkRel(updated_datum, props.link_rel_id, store.getData());\n      else delete updated_datum._new_rel_data;\n    } else if (updated_datum.id === datum.id) {\n      if (updated_datum.data.gender !== gender_stash) updateGendersForNewRelatives();\n    } else {\n      console.error('Something went wrong');\n    }\n\n    function updateGendersForNewRelatives() {\n      gender_stash = updated_datum.data.gender;\n      // if gender on main datum is changed, we need to switch mother/father ids for new children\n      const data = store.getData();\n      data.forEach(d => {\n        const rd = d._new_rel_data;\n        if (!rd) return\n        if (rd.rel_type === 'spouse') d.data.gender = d.data.gender === 'M' ? 'F' : 'M';\n        if (['son', 'daughter'].includes(rd.rel_type)) {\n          [d.rels.father, d.rels.mother] = [d.rels.mother, d.rels.father];\n        }\n      });\n    }\n  }\n\n  function onCancel() {\n    if (!this.is_active) return\n    this.is_active = false;\n\n    this.cleanUp();\n    this.cancelCallback(this.datum);\n\n    this.datum = null;\n    this.onChange = null;\n    this.onCancel = null;\n  }\n\n};\n\nAddRelative.prototype.setAddRelLabels = function(add_rel_labels) {\n  if (typeof add_rel_labels !== 'object') {\n    console.error('add_rel_labels must be an object');\n    return\n  }\n  for (let key in add_rel_labels) {\n    this.addRelLabels[key] = add_rel_labels[key];\n  }\n  return this\n};\n\nAddRelative.prototype.addRelLabelsDefault = function() {\n  return {\n    father: 'Add Father',\n    mother: 'Add Mother',\n    spouse: 'Add Spouse',\n    son: 'Add Son',\n    daughter: 'Add Daughter'\n  }\n};\n\nAddRelative.prototype.getStoreData = function() {\n  return this.store.getData()\n};\n\nAddRelative.prototype.cleanUp = function(data) {\n  if (!data) data = this.store.getData();\n  for (let i = data.length - 1; i >= 0; i--) {\n    const d = data[i];\n    if (d._new_rel_data) {\n      data.forEach(d2 => {\n        if (d2.rels.father === d.id) delete d2.rels.father;\n        if (d2.rels.mother === d.id) delete d2.rels.mother;\n        if ((d2.rels.children || []).includes(d.id)) d2.rels.children.splice(d2.rels.children.indexOf(d.id), 1);\n        if ((d2.rels.spouses || []).includes(d.id)) d2.rels.spouses.splice(d2.rels.spouses.indexOf(d.id), 1);\n      });\n      data.splice(i, 1);\n    } else if (d.__rels) {\n      if (d.__rels.father) d.rels.father = d.__rels.father;\n      if (d.__rels.mother) d.rels.mother = d.__rels.mother;\n      if (d.__rels.children) d.__rels.children.forEach(child_id => { if (!d.rels.children.includes(child_id)) d.rels.children.push(child_id); });\n      if (d.__rels.spouses) d.__rels.spouses.forEach(spouse_id => { if (!d.rels.spouses.includes(spouse_id)) d.rels.spouses.push(spouse_id); });\n      delete d.__rels;\n    }\n  }\n\n  return data\n};\n\nfunction addDatumRelsPlaceholders(datum, store_data, addRelLabels) {\n  setDatumRels(datum, store_data);\n\n  if (!datum.rels.father) {\n    const father = createNewPerson({data: {gender: \"M\"}, rels: {children: [datum.id]}});\n    father._new_rel_data = {rel_type: \"father\", label: addRelLabels.father, rel_id: datum.id};\n    datum.rels.father = father.id;\n    store_data.push(father);\n  }\n  if (!datum.rels.mother) {\n    const mother = createNewPerson({data: {gender: \"F\"}, rels: {children: [datum.id]}});\n    mother._new_rel_data = {rel_type: \"mother\", label: addRelLabels.mother, rel_id: datum.id};\n    datum.rels.mother = mother.id;\n    store_data.push(mother);\n  }\n  const mother = store_data.find(d => d.id === datum.rels.mother);\n  const father = store_data.find(d => d.id === datum.rels.father);\n  mother.rels.spouses = [father.id];\n  father.rels.spouses = [mother.id];\n\n  mother.rels.children = [datum.id];\n  father.rels.children = [datum.id];\n\n  if (!datum.rels.spouses) datum.rels.spouses = [];\n\n  if (datum.rels.children) {\n    let new_spouse;\n    datum.rels.children.forEach(child_id => {\n      const child = store_data.find(d => d.id === child_id);\n      if (!child.rels.mother) {\n        if (!new_spouse) new_spouse = createNewPerson({data: {gender: \"F\"}, rels: {spouses: [datum.id], children: []}});\n        new_spouse._new_rel_data = {rel_type: \"spouse\", label: addRelLabels.spouse, rel_id: datum.id};\n        new_spouse.rels.children.push(child.id);\n        datum.rels.spouses.push(new_spouse.id);\n        child.rels.mother = new_spouse.id;\n        store_data.push(new_spouse);\n      }\n      if (!child.rels.father) {\n        if (!new_spouse) new_spouse = createNewPerson({data: {gender: \"M\"}, rels: {spouses: [datum.id], children: []}});\n        new_spouse._new_rel_data = {rel_type: \"spouse\", label: addRelLabels.spouse, rel_id: datum.id};\n        new_spouse.rels.children.push(child.id);\n        datum.rels.spouses.push(new_spouse.id);\n        child.rels.father = new_spouse.id;\n        store_data.push(new_spouse);\n      }\n    });\n  }\n\n  const spouse_gender = datum.data.gender === \"M\" ? \"F\" : \"M\";\n  const new_spouse = createNewPerson({data: {gender: spouse_gender}, rels: {spouses: [datum.id]}});\n  new_spouse._new_rel_data = {rel_type: \"spouse\", label: addRelLabels.spouse, rel_id: datum.id};\n  datum.rels.spouses.push(new_spouse.id);\n  store_data.push(new_spouse);\n\n  if (!datum.rels.children) datum.rels.children = [];\n  datum.rels.spouses.forEach(spouse_id => {\n    const spouse = store_data.find(d => d.id === spouse_id);\n    const mother_id = datum.data.gender === \"M\" ? spouse.id : datum.id;\n    const father_id = datum.data.gender === \"F\" ? spouse.id : datum.id;\n    if (!spouse.rels.children) spouse.rels.children = [];\n    spouse.rels.children = spouse.rels.children.filter(child_id => datum.rels.children.includes(child_id));\n    \n    const new_son = createNewPerson({data: {gender: \"M\"}, rels: {father: father_id, mother: mother_id}});\n    new_son._new_rel_data = {rel_type: \"son\", label: addRelLabels.son, other_parent_id: spouse.id, rel_id: datum.id};\n    spouse.rels.children.push(new_son.id);\n    datum.rels.children.push(new_son.id);\n    store_data.push(new_son);\n\n    const new_daughter = createNewPerson({data: {gender: \"F\"}, rels: {mother: mother_id, father: father_id}});\n    new_daughter._new_rel_data = {rel_type: \"daughter\", label: addRelLabels.daughter, other_parent_id: spouse.id, rel_id: datum.id};\n    spouse.rels.children.push(new_daughter.id);\n    datum.rels.children.push(new_daughter.id);\n    store_data.push(new_daughter);\n  });\n\n  return store_data\n}\n\nfunction setDatumRels(datum, data) {\n  datum.__rels = JSON.parse(JSON.stringify(datum.rels));\n  const datum_rels = [datum];\n  Object.keys(datum.rels).forEach(rel_type => {\n    const rel = datum.rels[rel_type];\n    if (Array.isArray(rel)) {\n      rel.forEach(rel_id => {\n        findAndPushRel(rel_type, rel_id);\n      });\n    } else {\n      findAndPushRel(rel_type, rel);\n    }\n  });\n  return datum_rels\n\n  function findAndPushRel(rel_type, rel_id) {\n    const rel_datum = data.find(d => d.id === rel_id);\n    rel_datum.__rels = JSON.parse(JSON.stringify(rel_datum.rels));\n\n    if (rel_type === 'father' || rel_type === 'mother') {\n      delete rel_datum.rels.father;\n      delete rel_datum.rels.mother;\n    }\n\n    if (rel_type === 'children') {\n      rel_datum.rels.children = [];\n      rel_datum.rels.spouses = [];\n    }\n\n    datum_rels.push(rel_datum);\n  }\n}\n\nfunction editTree(...args) { return new EditTree(...args) }\n\nfunction EditTree(cont, store) {\n  this.cont = cont;\n  this.store = store;\n\n  this.fields = [\n    {type: 'text', label: 'first name', id: 'first name'},\n    {type: 'text', label: 'last name', id: 'last name'},\n    {type: 'text', label: 'birthday', id: 'birthday'},\n    {type: 'text', label: 'avatar', id: 'avatar'}\n  ];\n\n  this.form_cont = null;\n\n  this.is_fixed = true;\n\n  this.history = null;\n  this.no_edit = false;\n\n  this.onChange = null;\n\n  this.editFirst = false;\n\n  this.postSubmit = null;\n\n  this.link_existing_rel_config = null;\n\n  this.init();\n\n  return this\n}\n\nEditTree.prototype.init = function() {\n  this.form_cont = d3.select(this.cont).append('div').classed('f3-form-cont', true).node();\n  this.addRelativeInstance = this.setupAddRelative();\n  this.createHistory();\n};\n\nEditTree.prototype.open = function(datum) {\n  if (datum.data.data) datum = datum.data;\n  if (this.addRelativeInstance.is_active && !datum._new_rel_data) {\n    this.addRelativeInstance.onCancel();\n    datum = this.store.getDatum(datum.id);\n  }\n\n  this.cardEditForm(datum);\n};\n\nEditTree.prototype.openWithoutRelCancel = function(datum) {\n  this.cardEditForm(datum);\n};\n\nEditTree.prototype.cardEditForm = function(datum) {\n  const props = {};\n  const is_new_rel = datum?._new_rel_data;\n  if (is_new_rel) {\n    props.onCancel = () => this.addRelativeInstance.onCancel();\n  } else {\n    props.addRelative = this.addRelativeInstance;\n    props.deletePerson = () => {\n      const data = this.store.getData();\n      deletePerson(datum, data);\n      this.store.updateData(data);\n      this.openFormWithId(this.store.getLastAvailableMainDatum().id);\n\n      this.store.updateTree({});\n    };\n  }\n\n  const form_creator = f3.handlers.createForm({\n    store: this.store, \n    datum, \n    postSubmit: postSubmit.bind(this),\n    fields: this.fields, \n    addRelative: null,\n    onCancel: () => {},\n    editFirst: this.editFirst,\n    link_existing_rel_config: this.link_existing_rel_config,\n    ...props\n  });\n\n  form_creator.no_edit = this.no_edit;\n  if (this.no_edit) form_creator.editable = false;\n  const form_cont = f3.handlers.formInfoSetup(form_creator, this.closeForm.bind(this));\n\n  this.form_cont.innerHTML = '';\n  this.form_cont.appendChild(form_cont);\n\n  this.openForm();\n\n  function postSubmit(props) {\n    if (this.addRelativeInstance.is_active) {\n      this.addRelativeInstance.onChange(datum, props);\n      if (this.postSubmit) this.postSubmit(datum, this.store.getData());\n      const active_datum = this.addRelativeInstance.datum;\n      this.store.updateMainId(active_datum.id);\n      this.openWithoutRelCancel(active_datum);\n    } else if (datum.to_add && props?.link_rel_id) {\n      handleLinkRel(datum, props.link_rel_id, this.store.getData());\n      this.store.updateMainId(props.link_rel_id);\n      this.openFormWithId(props.link_rel_id);\n    } else if (!props?.delete) {\n      if (this.postSubmit) this.postSubmit(datum, this.store.getData());\n      this.openFormWithId(datum.id);\n    }\n\n    if (!this.is_fixed) this.closeForm();\n    \n    this.store.updateTree({});\n\n    this.updateHistory();\n  }\n};\n\nEditTree.prototype.openForm = function() {\n  d3.select(this.form_cont).classed('opened', true);\n};\n\nEditTree.prototype.closeForm = function() {\n  d3.select(this.form_cont).classed('opened', false).html('');\n  this.store.updateTree({});\n};\n\nEditTree.prototype.fixed = function() {\n  this.is_fixed = true;\n  d3.select(this.form_cont).style('position', 'relative');\n\n  return this\n};\n\nEditTree.prototype.absolute = function() {\n  this.is_fixed = false;\n  d3.select(this.form_cont).style('position', 'absolute');\n\n  return this\n};\n\nEditTree.prototype.setCardClickOpen = function(card) {\n  card.setOnCardClick((e, d) => {\n    if (this.addRelativeInstance.is_active) {\n      this.open(d);\n      return\n    }\n    this.open(d);\n    this.store.updateMainId(d.data.id);\n    this.store.updateTree({});\n  });\n\n  return this\n};\n\nEditTree.prototype.openFormWithId = function(d_id) {\n  if (d_id) {\n    const d = this.store.getDatum(d_id);\n    this.openWithoutRelCancel(d);\n  } else {\n    const d = this.store.getMainDatum();\n    this.openWithoutRelCancel(d);\n  }\n};\n\nEditTree.prototype.createHistory = function() {\n  this.history = f3.handlers.createHistory(this.store, this.getStoreDataCopy.bind(this), historyUpdateTree.bind(this));\n  this.history.controls = f3.handlers.createHistoryControls(this.cont, this.history);\n  this.history.changed();\n  this.history.controls.updateButtons();\n\n  return this\n\n  function historyUpdateTree() {\n    if (this.addRelativeInstance.is_active) this.addRelativeInstance.onCancel();\n    this.store.updateTree({initial: false});\n    this.history.controls.updateButtons();\n    this.openFormWithId(this.store.getMainDatum()?.id);\n    if (this.onChange) this.onChange();\n  }\n};\n\nEditTree.prototype.setNoEdit = function() {\n  this.no_edit = true;\n\n  return this\n};\n\nEditTree.prototype.setEdit = function() {\n  this.no_edit = false;\n\n  return this\n};\n\nEditTree.prototype.setFields = function(fields) {\n  const new_fields = [];\n  if (!Array.isArray(fields)) {\n    console.error('fields must be an array');\n    return this\n  }\n  for (const field of fields) {\n    if (typeof field === 'string') {\n      new_fields.push({type: 'text', label: field, id: field});\n    } else if (typeof field === 'object') {\n      if (!field.id) {\n        console.error('fields must be an array of objects with id property');\n      } else {\n        new_fields.push(field);\n      }\n    } else {\n      console.error('fields must be an array of strings or objects');\n    }\n  }\n  this.fields = new_fields;\n\n  return this\n};\n\nEditTree.prototype.setOnChange = function(fn) {\n  this.onChange = fn;\n\n  return this\n};\n\nEditTree.prototype.addRelative = function(datum) {\n  if (!datum) datum = this.store.getMainDatum();\n  this.addRelativeInstance.activate(datum);\n\n  return this\n\n};\n\nEditTree.prototype.setupAddRelative = function() {\n  return addRelative(this.store, cancelCallback.bind(this))\n\n  function cancelCallback(datum) {\n    this.store.updateMainId(datum.id);\n    this.store.updateTree({});\n    this.openFormWithId(datum.id);\n  }\n};\n\nEditTree.prototype.setEditFirst = function(editFirst) {\n  this.editFirst = editFirst;\n\n  return this\n};\n\nEditTree.prototype.isAddingRelative = function() {\n  return this.addRelativeInstance.is_active\n};\n\nEditTree.prototype.setAddRelLabels = function(add_rel_labels) {\n  this.addRelativeInstance.setAddRelLabels(add_rel_labels);\n  return this\n};\n\nEditTree.prototype.setLinkExistingRelConfig = function(link_existing_rel_config) {\n  this.link_existing_rel_config = link_existing_rel_config;\n  return this\n};\n\nEditTree.prototype.getStoreDataCopy = function() {  // todo: should make more sense\n  let data = JSON.parse(JSON.stringify(this.store.getData()));  // important to make a deep copy of the data\n  if (this.addRelativeInstance.is_active) data = this.addRelativeInstance.cleanUp(data);    \n  data = f3.handlers.cleanupDataJson(data);\n  return data\n};\n\nEditTree.prototype.getDataJson = function() {\n  return JSON.stringify(this.getStoreDataCopy(), null, 2)\n};\n\nEditTree.prototype.updateHistory = function() {\n  if (this.history) {\n    this.history.changed();\n    this.history.controls.updateButtons();\n  }\n\n  if (this.onChange) this.onChange();\n};\n\nEditTree.prototype.setPostSubmit = function(postSubmit) {\n  this.postSubmit = postSubmit;\n\n  return this\n};\n\nEditTree.prototype.destroy = function() {\n  this.history.controls.destroy();\n  this.history = null;\n  d3.select(this.cont).select('.f3-form-cont').remove();\n  if (this.addRelativeInstance.onCancel) this.addRelativeInstance.onCancel();\n  this.store.updateTree({});\n\n  return this\n};\n\nfunction linkSpouseText(svg, tree, props={}) {\n  const links_data = [];\n  tree.data.forEach(d => {\n    if (d._spouse && d.data.data.gender === 'F') links_data.push({nodes: [d, d._spouse], id: `${d.data.id}--${d._spouse.data.id}`});\n    if (d.spouses) d.spouses.forEach(sp => links_data.push({nodes: [sp, d], id: `${sp.data.id}--${d.data.id}`}));\n  });\n\n  const link = d3.select(svg).select(\".links_view\").selectAll(\"g.link-text\").data(links_data, d => d.id);\n  const link_exit = link.exit();\n  const link_enter = link.enter().append(\"g\").attr(\"class\", \"link-text\");\n  const link_update = link_enter.merge(link);\n  const spouseLineX = (sp1, sp2) => {\n    if (sp1.spouse && sp1.data.data.gender === 'F') return sp1.x - props.node_separation/2\n    else if (sp2.spouse && sp2.data.data.gender === 'M') return sp2.x + props.node_separation/2\n    else return Math.min(sp1.x, sp2.x) + props.node_separation/2\n  };\n\n  link_exit.each(linkExit);\n  link_enter.each(linkEnter);\n  link_update.each(linkUpdate);\n\n  function linkEnter(d) {\n    const [sp1, sp2] = d.nodes;\n    const text_g = d3.select(this);\n    text_g\n      .attr('transform', `translate(${spouseLineX(sp1, sp2)}, ${sp1.y-3})`)\n      .style('opacity', 0);\n\n    text_g.append(\"text\").style('font-size', '12px').style('fill', '#fff').style('text-anchor', 'middle');\n  }\n\n  function linkUpdate(d) {\n    const [sp1, sp2] = d.nodes;\n    const text_g = d3.select(this);\n    const delay = props.initial ? calculateDelay(tree, sp1, props.transition_time) : 0;\n    text_g.select('text').text(props.linkSpouseText(sp1, sp2));\n    text_g.transition('text').duration(props.transition_time).delay(delay)\n    .attr('transform', `translate(${spouseLineX(sp1, sp2)}, ${sp1.y-3})`);\n    text_g.transition('text-op').duration(100).delay(delay + props.transition_time).style('opacity', 1);\n  }\n\n  function linkExit(d) {\n    const text_g = d3.select(this);\n    text_g.transition('text').duration(100).style('opacity', 0)\n      .on(\"end\", () => text_g.remove());\n  }\n\n}\n\nfunction createChart(...args) { return new CreateChart(...args) }\n\nfunction CreateChart(cont, data) {\n  this.cont = null;\n  this.store = null;\n  this.svg = null;\n  this.getCard = null;\n  this.node_separation = 250;\n  this.level_separation = 150;\n  this.is_horizontal = false;\n  this.single_parent_empty_card = true;\n  this.transition_time = 2000;\n  this.linkSpouseText = false;\n\n  this.is_card_html = false;\n\n  this.beforeUpdate = null;\n  this.afterUpdate = null;\n\n  this.init(cont, data);\n\n  return this\n}\n\nCreateChart.prototype.init = function(cont, data) {\n  this.cont = cont = setCont(cont);\n  const getSvgView = () => cont.querySelector('svg .view');\n  const getHtmlSvg = () => cont.querySelector('#htmlSvg');\n  const getHtmlView = () => cont.querySelector('#htmlSvg .cards_view');\n\n  this.svg = f3.createSvg(cont, {onZoom: f3.htmlHandlers.onZoomSetup(getSvgView, getHtmlView)});\n  f3.htmlHandlers.createHtmlSvg(cont);\n\n  this.store = f3.createStore({\n    data,\n    node_separation: this.node_separation,\n    level_separation: this.level_separation,\n    single_parent_empty_card: this.single_parent_empty_card,\n    is_horizontal: this.is_horizontal\n  });\n\n  this.store.setOnUpdate(props => {\n    if (this.beforeUpdate) this.beforeUpdate(props);\n    props = Object.assign({transition_time: this.transition_time}, props || {});\n    if (this.is_card_html) props = Object.assign({}, props || {}, {cardHtml: getHtmlSvg()});\n    f3.view(this.store.getTree(), this.svg, this.getCard(), props || {});\n    if (this.linkSpouseText) linkSpouseText(this.svg, this.store.getTree(), Object.assign({}, props || {}, {linkSpouseText: this.linkSpouseText, node_separation: this.node_separation}));\n    if (this.afterUpdate) this.afterUpdate(props);\n  });\n};\n\nCreateChart.prototype.updateTree = function(props = {initial: false}) {\n  this.store.updateTree(props);\n\n  return this\n};\n\nCreateChart.prototype.updateData = function(data) {\n  this.store.updateData(data);\n\n  return this\n};\n\nCreateChart.prototype.setCardYSpacing = function(card_y_spacing) {\n  if (typeof card_y_spacing !== 'number') {\n    console.error('card_y_spacing must be a number');\n    return this\n  }\n  this.level_separation = card_y_spacing;\n  this.store.state.level_separation = card_y_spacing;\n\n  return this\n};\n\nCreateChart.prototype.setCardXSpacing = function(card_x_spacing) {\n  if (typeof card_x_spacing !== 'number') {\n    console.error('card_x_spacing must be a number');\n    return this\n  }\n  this.node_separation = card_x_spacing;\n  this.store.state.node_separation = card_x_spacing;\n\n  return this\n};\n\nCreateChart.prototype.setOrientationVertical = function() {\n  this.is_horizontal = false;\n  this.store.state.is_horizontal = false;\n\n  return this\n};\n\nCreateChart.prototype.setOrientationHorizontal = function() {\n  this.is_horizontal = true;\n  this.store.state.is_horizontal = true;\n\n  return this\n};\n\nCreateChart.prototype.setShowSiblingsOfMain = function(show_siblings_of_main) {\n  this.store.state.show_siblings_of_main = show_siblings_of_main;\n\n  return this\n};\n\nCreateChart.prototype.setModifyTreeHierarchy = function(modifyTreeHierarchy) {\n  this.store.state.modifyTreeHierarchy = modifyTreeHierarchy;\n\n  return this\n};\n\nCreateChart.prototype.setPrivateCardsConfig = function(private_cards_config) {\n  this.store.state.private_cards_config = private_cards_config;\n\n  return this\n};\n\nCreateChart.prototype.setLinkSpouseText = function(linkSpouseText) {\n  this.linkSpouseText = linkSpouseText;\n\n  return this\n};\n\nCreateChart.prototype.setSingleParentEmptyCard = function(single_parent_empty_card, {label='Unknown'} = {}) {\n  this.single_parent_empty_card = single_parent_empty_card;\n  this.store.state.single_parent_empty_card = single_parent_empty_card;\n  this.store.state.single_parent_empty_card_label = label;\n  if (this.editTreeInstance && this.editTreeInstance.addRelativeInstance.is_active) this.editTreeInstance.addRelativeInstance.onCancel();\n  f3.handlers.removeToAddFromData(this.store.getData() || []);\n\n  return this\n};\n\n\nCreateChart.prototype.setCard = function(Card) {\n  this.is_card_html = Card.is_html;\n\n  if (this.is_card_html) {\n    this.svg.querySelector('.cards_view').innerHTML = '';\n    this.cont.querySelector('#htmlSvg').style.display = 'block';\n  } else {\n    this.cont.querySelector('#htmlSvg .cards_view').innerHTML = '';\n    this.cont.querySelector('#htmlSvg').style.display = 'none';\n  }\n\n  const card = Card(this.cont, this.store);\n  this.getCard = () => card.getCard();\n\n  return card\n};\n\nCreateChart.prototype.setTransitionTime = function(transition_time) {\n  this.transition_time = transition_time;\n\n  return this\n};\n\nCreateChart.prototype.setSortChildrenFunction = function(sortChildrenFunction) {\n  this.store.state.sortChildrenFunction = sortChildrenFunction;\n\n  return this\n};\n\nCreateChart.prototype.setSortSpousesFunction = function(sortSpousesFunction) {\n  this.store.state.sortSpousesFunction = sortSpousesFunction;\n\n  return this\n};\n\nCreateChart.prototype.setAncestryDepth = function(ancestry_depth) {\n  this.store.state.ancestry_depth = ancestry_depth;\n\n  return this\n};\n\nCreateChart.prototype.setProgenyDepth = function(progeny_depth) {\n  this.store.state.progeny_depth = progeny_depth;\n\n  return this\n};\n\nCreateChart.prototype.setDuplicateBranchToggle = function(duplicate_branch_toggle) {\n  this.store.state.duplicate_branch_toggle = duplicate_branch_toggle;\n\n  return this\n};\n\nCreateChart.prototype.editTree = function() {\n  return this.editTreeInstance = editTree(this.cont, this.store)\n};\n\nCreateChart.prototype.updateMain = function(d) {\n  this.store.updateMainId(d.data.id);\n  this.store.updateTree({});\n\n  return this\n};\n\nCreateChart.prototype.updateMainId = function(id) {\n  this.store.updateMainId(id);\n\n  return this\n};\n\nCreateChart.prototype.getMainDatum = function() {\n  return this.store.getMainDatum()\n};\n\nCreateChart.prototype.updateData = function(data) {\n  this.store.updateData(data);\n};\n\nCreateChart.prototype.setBeforeUpdate = function(fn) {\n  this.beforeUpdate = fn;\n  return this\n};\n\nCreateChart.prototype.setAfterUpdate = function(fn) {\n  this.afterUpdate = fn;\n  return this\n};\n\nfunction setCont(cont) {\n  if (typeof cont === \"string\") cont = document.querySelector(cont);\n  return cont\n}\n\nfunction processCardDisplay(card_display) {\n  const card_display_arr = [];\n  if (Array.isArray(card_display)) {\n    card_display.forEach(d => {\n      if (typeof d === 'function') {\n        card_display_arr.push(d);\n      } else if (typeof d === 'string') {\n        card_display_arr.push(d1 => d1.data[d]);\n      } else if (Array.isArray(d)) {\n        card_display_arr.push(d1 => d.map(d2 => d1.data[d2]).join(' '));\n      }\n    });\n  } else if (typeof card_display === 'function') {\n    card_display_arr.push(card_display);\n  } else if (typeof card_display === 'string') {\n    card_display_arr.push(d1 => d1.data[card_display]);\n  }\n  return card_display_arr\n}\n\nCardSvgWrapper.is_html = false;\nfunction CardSvgWrapper(...args) { return new CardSvg$1(...args) }\n\nfunction CardSvg$1(cont, store) {\n  this.cont = cont;\n  this.store = store;\n  this.svg = null;\n  this.getCard = null;\n  this.card_dim = {w:220,h:70,text_x:75,text_y:15,img_w:60,img_h:60,img_x:5,img_y:5};\n  this.card_display = [d => `${d.data[\"first name\"]} ${d.data[\"last name\"]}`];\n  this.mini_tree = true;\n  this.link_break = false;\n  this.onCardClick = this.onCardClickDefault.bind(this);\n  this.onCardUpdate = null;\n\n  this.init();\n\n  return this\n}\n\nCardSvg$1.prototype.init = function() {\n  this.svg = this.cont.querySelector('svg.main_svg');\n\n  this.getCard = () => f3.elements.CardSvg({\n    store: this.store,\n    svg: this.svg,\n    card_dim: this.card_dim,\n    card_display: this.card_display,\n    mini_tree: this.mini_tree,\n    link_break: this.link_break,\n    onCardClick: this.onCardClick,\n    onCardUpdate: this.onCardUpdate\n  });\n};\n\nCardSvg$1.prototype.setCardDisplay = function(card_display) {\n  this.card_display = processCardDisplay(card_display);\n\n  return this\n};\n\nCardSvg$1.prototype.setCardDim = function(card_dim) {\n  if (typeof card_dim !== 'object') {\n    console.error('card_dim must be an object');\n    return this\n  }\n  for (let key in card_dim) {\n    const val = card_dim[key];\n    if (typeof val !== 'number' && typeof val !== 'boolean') {\n      console.error(`card_dim.${key} must be a number or boolean`);\n      return this\n    }\n    if (key === 'width') key = 'w';\n    if (key === 'height') key = 'h';\n    if (key === 'img_width') key = 'img_w';\n    if (key === 'img_height') key = 'img_h';\n    if (key === 'img_x') key = 'img_x';\n    if (key === 'img_y') key = 'img_y';\n    this.card_dim[key] = val;\n  }\n\n  updateCardSvgDefs(this.svg, this.card_dim);\n\n  return this\n};\n\nCardSvg$1.prototype.setOnCardUpdate = function(onCardUpdate) {\n  this.onCardUpdate = onCardUpdate;\n  return this\n};\n\nCardSvg$1.prototype.setMiniTree = function(mini_tree) {\n  this.mini_tree = mini_tree;\n\n  return this\n};\n\nCardSvg$1.prototype.setLinkBreak = function(link_break) {\n  this.link_break = link_break;\n\n  return this\n};\n\nCardSvg$1.prototype.onCardClickDefault = function(e, d) {\n  this.store.updateMainId(d.data.id);\n  this.store.updateTree({});\n};\n\nCardSvg$1.prototype.setOnCardClick = function(onCardClick) {\n  this.onCardClick = onCardClick;\n\n  return this\n};\n\nCardHtmlWrapper.is_html = true;\nfunction CardHtmlWrapper(...args) { return new CardHtml$1(...args) }\n\nCardHtml$1.prototype.is_html = true;\nfunction CardHtml$1(cont, store) {\n  this.cont = cont;\n  this.store = store;\n  this.getCard = null;\n  this.card_display = [d => `${d.data[\"first name\"]} ${d.data[\"last name\"]}`];\n  this.cardImageField = 'avatar';\n  this.onCardClick = this.onCardClickDefault;\n  this.style = 'default';\n  this.mini_tree = false;\n  this.onCardUpdate = null;\n  this.card_dim = {};\n  this.cardInnerHtmlCreator = null;\n\n  this.init();\n\n  return this\n}\n\nCardHtml$1.prototype.init = function() {\n  this.svg = this.cont.querySelector('svg.main_svg');\n\n  this.getCard = () => f3.elements.CardHtml({\n    store: this.store,\n    card_display: this.card_display,\n    cardImageField: this.cardImageField,\n    defaultPersonIcon: this.defaultPersonIcon,\n    onCardClick: this.onCardClick,\n    style: this.style,\n    mini_tree: this.mini_tree,\n    onCardUpdate: this.onCardUpdate,\n    card_dim: this.card_dim,\n    empty_card_label: this.store.state.single_parent_empty_card_label,\n    cardInnerHtmlCreator: this.cardInnerHtmlCreator,\n    duplicate_branch_toggle: this.store.state.duplicate_branch_toggle,\n    onCardMouseenter: this.onCardMouseenter ? this.onCardMouseenter.bind(this) : null,\n    onCardMouseleave: this.onCardMouseleave ? this.onCardMouseleave.bind(this) : null\n  });\n};\n\nCardHtml$1.prototype.setCardDisplay = function(card_display) {\n  this.card_display = processCardDisplay(card_display);\n\n  return this\n};\n\nCardHtml$1.prototype.setCardImageField = function(cardImageField) {\n  this.cardImageField = cardImageField;\n  return this\n};\n\nCardHtml$1.prototype.setDefaultPersonIcon = function(defaultPersonIcon) {\n  this.defaultPersonIcon = defaultPersonIcon;\n  return this\n};\n\nCardHtml$1.prototype.setOnCardClick = function(onCardClick) {\n  this.onCardClick = onCardClick;\n  return this\n};\n\nCardHtml$1.prototype.onCardClickDefault = function(e, d) {\n  this.store.updateMainId(d.data.id);\n  this.store.updateTree({});\n};\n\nCardHtml$1.prototype.setStyle = function(style) {\n  this.style = style;\n  return this\n};\n\nCardHtml$1.prototype.setMiniTree = function(mini_tree) {\n  this.mini_tree = mini_tree;\n\n  return this\n};\n\nCardHtml$1.prototype.setOnCardUpdate = function(onCardUpdate) {\n  this.onCardUpdate = onCardUpdate;\n  return this\n};\n\nCardHtml$1.prototype.setCardDim = function(card_dim) {\n  if (typeof card_dim !== 'object') {\n    console.error('card_dim must be an object');\n    return this\n  }\n  for (let key in card_dim) {\n    const val = card_dim[key];\n    if (typeof val !== 'number' && typeof val !== 'boolean') {\n      console.error(`card_dim.${key} must be a number or boolean`);\n      return this\n    }\n    if (key === 'width') key = 'w';\n    if (key === 'height') key = 'h';\n    if (key === 'img_width') key = 'img_w';\n    if (key === 'img_height') key = 'img_h';\n    if (key === 'img_x') key = 'img_x';\n    if (key === 'img_y') key = 'img_y';\n    this.card_dim[key] = val;\n  }\n\n  return this\n};\n\nCardHtml$1.prototype.resetCardDim = function() {\n  this.card_dim = {};\n  return this\n};\n\nCardHtml$1.prototype.setCardInnerHtmlCreator = function(cardInnerHtmlCreator) {\n  this.cardInnerHtmlCreator = cardInnerHtmlCreator;\n\n  return this\n};\n\nCardHtml$1.prototype.setOnHoverPathToMain = function() {\n  this.onCardMouseenter = this.onEnterPathToMain.bind(this);\n  this.onCardMouseleave = this.onLeavePathToMain.bind(this);\n  return this\n};\n\nCardHtml$1.prototype.unsetOnHoverPathToMain = function() {\n  this.onCardMouseenter = null;\n  this.onCardMouseleave = null;\n  return this\n};\n\nCardHtml$1.prototype.onEnterPathToMain = function(e, datum) {\n  this.to_transition = datum.data.id;\n  const main_datum = this.store.getTreeMainDatum();\n  const cards = d3.select(this.cont).select('div.cards_view').selectAll('.card_cont');\n  const links = d3.select(this.cont).select('svg.main_svg .links_view').selectAll('.link');\n  const [cards_node_to_main, links_node_to_main] = pathToMain(cards, links, datum, main_datum);\n  cards_node_to_main.forEach(d => {\n    const delay = Math.abs(datum.depth - d.card.depth) * 200;\n    d3.select(d.node.querySelector('div.card-inner'))\n      .transition().duration(0).delay(delay)\n      .on('end', () => this.to_transition === datum.data.id && d3.select(d.node.querySelector('div.card-inner')).classed('f3-path-to-main', true));\n  });\n  links_node_to_main.forEach(d => {\n    const delay = Math.abs(datum.depth - d.link.depth) * 200;\n    d3.select(d.node)\n      .transition().duration(0).delay(delay)\n      .on('end', () => this.to_transition === datum.data.id && d3.select(d.node).classed('f3-path-to-main', true));\n  });\n\n  return this\n};\n\nCardHtml$1.prototype.onLeavePathToMain = function(e, d) {\n  this.to_transition = false;\n  d3.select(this.cont).select('div.cards_view').selectAll('div.card-inner').classed('f3-path-to-main', false);\n  d3.select(this.cont).select('svg.main_svg .links_view').selectAll('.link').classed('f3-path-to-main', false);\n\n  return this\n};\n\nvar f3 = {\n  CalculateTree,\n  createStore,\n  view,\n  createSvg,\n  handlers,\n  elements,\n  htmlHandlers,\n  icons,\n  createChart,\n\n  CardSvg: CardSvgWrapper,\n  CardHtml: CardHtmlWrapper,\n};\n\nexport default f3;\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}}]
}